<!doctype html><html lang=en><head><title>A Use Case for `UseCase`s in Kotlin · cekrem.github.io
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="archaic remnants or useful abstractions?"><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/featured-with-margins.png"><meta name=twitter:title content="A Use Case for `UseCase`s in Kotlin"><meta name=twitter:description content="archaic remnants or useful abstractions?"><meta property="og:url" content="https://cekrem.github.io/posts/a-use-case-for-usecases-in-kotlin/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="A Use Case for `UseCase`s in Kotlin"><meta property="og:description" content="archaic remnants or useful abstractions?"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-31T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-31T00:00:00+00:00"><meta property="article:tag" content="Vipps"><meta property="article:tag" content="Vipps Mobilepay"><meta property="article:tag" content="Android"><meta property="article:tag" content="Kotlin"><meta property="article:tag" content="Clean Architecture"><meta property="article:tag" content="Architecture"><meta property="og:image" content="https://cekrem.github.io/images/featured-with-margins.png"><link rel=canonical href=https://cekrem.github.io/posts/a-use-case-for-usecases-in-kotlin/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.07092c1350ffd254998dc43a44ae96e617d14af4df4602626878df89189c5e1a.css integrity="sha256-BwksE1D/0lSZjcQ6RK6W5hfRSvTfRgJiaHjfiRicXho=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-light"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/hire/>Hire me?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/a-use-case-for-usecases-in-kotlin/>A Use Case for `UseCase`s in Kotlin</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-01-31T00:00:00Z>January 31, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
5-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/vipps/>Vipps</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/vipps-mobilepay/>Vipps Mobilepay</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/android/>Android</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/kotlin/>Kotlin</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/clean-architecture/>Clean Architecture</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/architecture/>Architecture</a></span></div></div></header><div class=post-content><h2 id=my-first-encounter-with-a-kotlin-usecase>My First Encounter with a Kotlin <code>UseCase</code>
<a class=heading-link href=#my-first-encounter-with-a-kotlin-usecase><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>One of my responsibilities as an Android Developer in Vipps (Mobilepay) was to do tech interviews. After a while, I also made the tech assignments and changed the recruitment process a bit. But in the earlier days, we used a standard &ldquo;build X using Y&rdquo;, where &ldquo;Y&rdquo; was modern Android tools (preferably Compose), and &ldquo;X&rdquo; was some non-descript hello world-ish app that did something I can&rsquo;t for the life of me remember. During one of the tech task evaluations we did prior to an interview, I encountered a strange animal completely unknown to me. A <code>UseCase</code> class, with an <code>operator fun invoke()</code> method.</p><p>It looked something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>GetProfileUseCase</span>(<span style=font-weight:700>private</span> <span style=font-weight:700>val</span> profileRepository: ProfileRepository) {
</span></span><span style=display:flex><span>    <span style=font-weight:700>suspend</span> <span style=font-weight:700>operator</span> <span style=font-weight:700>fun</span> invoke(userId: String): Profile? {
</span></span><span style=display:flex><span>        <span style=font-weight:700>val</span> profile = profileRepository.<span style=font-weight:700>get</span>(userId)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-style:italic>// ish; the details don&#39;t matter
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>        <span style=font-weight:700>if</span> (profile.isValid) {
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> profile
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> <span style=font-weight:700>null</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Never had I ever (remember, I started my Kotlin/Java days @ Vipps, and they simply don&rsquo;t do that; it&rsquo;s also a no Go – pun intended).</p><p>This <code>UseCase</code> was then used like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=font-weight:700>val</span> getProfile = GetProfileUseCase(someInjectedProfileRepo)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getProfile(userId)
</span></span></code></pre></div><h2 id=what-my-betters-told-me>What my betters told me
<a class=heading-link href=#what-my-betters-told-me><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>&mldr;was that this whole UseCase layer (and especially the way the operator function was used!) was overengineering at its worst, and that the consept in general reeked of ye old Java from back when people didn&rsquo;t know any better. I was curious, but sadly not curious enough to do my own research back then. I made a mental note to check if the candidate was the over-engineering type in the actual interview (which, to my pleasant surprise, he really wasn&rsquo;t, and he got the job), and thought very little of it.</p><h2 id=but-wait>But wait!
<a class=heading-link href=#but-wait><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>I&rsquo;m in <a href=https://amzn.to/40SYBRI class=external-link target=_blank rel=noopener>Uncle Bob</a> land these days. I know he&rsquo;s a somewhat controversial guy, and a lot of people have an issue or to with some opinionated advice in his Clean Code(r) books. Leaving those controveries alone for the moment – this guy has had a significant impact on how we approach software architecture and system design. So, as I&rsquo;m reading his less controversial work, <a href=https://amzn.to/4iAc8o1 class=external-link target=_blank rel=noopener>Clean Architecture</a>, this UseCase thing pops up again! And, further more, in many of his talks (I&rsquo;ve seen at least two on YouTube last week) he sites <a href=https://amzn.to/4hcyXNf class=external-link target=_blank rel=noopener>Ivar Jacobson</a> in general, and recommends his <a href=https://amzn.to/3CuqLZE class=external-link target=_blank rel=noopener>Object-Oriented Software Engineering: A Use Case Driven Approach</a> (note the subtitle!) in particular.</p><h2 id=the-clean-architecture-perspective>The Clean Architecture Perspective
<a class=heading-link href=#the-clean-architecture-perspective><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>What I&rsquo;ve come to realize is that UseCases aren&rsquo;t just some archaic remnant of over-engineered Java applications - they serve a crucial role in Clean Architecture&rsquo;s separation of concerns. In fact, they represent what Uncle Bob calls &ldquo;application-specific business rules&rdquo; - the actual behaviors that make your application unique.</p><p>Consider our earlier example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>GetProfileUseCase</span>(<span style=font-weight:700>private</span> <span style=font-weight:700>val</span> profileRepository: ProfileRepository) {
</span></span><span style=display:flex><span>    <span style=font-weight:700>suspend</span> <span style=font-weight:700>operator</span> <span style=font-weight:700>fun</span> invoke(userId: String): Profile? {
</span></span><span style=display:flex><span>        <span style=font-weight:700>val</span> profile = profileRepository.<span style=font-weight:700>get</span>(userId)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> (profile.isValid) {
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> profile
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> <span style=font-weight:700>null</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This UseCase encapsulates a specific business rule: &ldquo;A user can retrieve a valid profile by ID.&rdquo; It&rsquo;s not just a pass-through to the repository - it enforces validation rules and handles the business logic of what constitutes a retrievable profile.</p><h2 id=why-they-make-sense>Why They Make Sense
<a class=heading-link href=#why-they-make-sense><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ol><li><p><strong>Single Responsibility</strong>: Each UseCase represents one specific thing the application can do. This makes the code more maintainable and easier to test.</p></li><li><p><strong>Independence from Frameworks</strong>: UseCases don&rsquo;t know about Android, Compose, or any other framework. They&rsquo;re pure business logic, which means they&rsquo;re highly portable and reusable.</p></li><li><p><strong>Dependency Rule</strong>: They help maintain Clean Architecture&rsquo;s dependency rule - outer layers (UI, frameworks) depend on inner layers (UseCases, Entities), never the other way around.</p></li><li><p><strong>Testability</strong>: Because UseCases are framework-independent and focused on a single responsibility, they&rsquo;re incredibly easy to test:</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>GetProfileUseCaseTest</span> {
</span></span><span style=display:flex><span>    @Test
</span></span><span style=display:flex><span>    <span style=font-weight:700>fun</span> `should return null for invalid profile`() {
</span></span><span style=display:flex><span>        <span style=font-weight:700>val</span> mockRepo = mockk&lt;ProfileRepository&gt;()
</span></span><span style=display:flex><span>        coEvery { mockRepo.<span style=font-weight:700>get</span>(any()) } returns Profile(valid = <span style=font-weight:700>false</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>val</span> useCase = GetProfileUseCase(mockRepo)
</span></span><span style=display:flex><span>        runBlocking {
</span></span><span style=display:flex><span>            assertNull(useCase(<span style=font-style:italic>&#34;userId&#34;</span>))
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=the-invoke-operator-more-than-syntactic-sugar>The <code>invoke</code> Operator: More Than Syntactic Sugar
<a class=heading-link href=#the-invoke-operator-more-than-syntactic-sugar><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>That <code>operator fun invoke()</code> that initially seemed strange? It&rsquo;s actually a clever use of Kotlin&rsquo;s operator overloading that makes the UseCase feel like a first-class function while maintaining the benefits of a class (like dependency injection and state if needed).</p><h2 id=when-to-use-usecases>When to Use UseCases
<a class=heading-link href=#when-to-use-usecases><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>UseCases make the most sense when:</p><ul><li>You have distinct business rules that need to be enforced</li><li>The operation is more complex than a simple CRUD operation</li><li>You need to combine multiple data sources or operations</li><li>You want to maintain a clean separation between business logic and other layers</li></ul><h2 id=conclusion>Conclusion
<a class=heading-link href=#conclusion><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>While UseCases might seem like unnecessary abstraction at first glance, they serve a valuable purpose in maintaining clean architecture principles. They&rsquo;re not just about following patterns blindly - they&rsquo;re about creating maintainable, testable code that clearly expresses business intent.</p><p>The next time you encounter a UseCase in a codebase (or consider writing one), remember that it&rsquo;s not just Java baggage - it&rsquo;s a powerful tool for encapsulating business logic and maintaining architectural boundaries. Used judiciously, UseCases can make your codebase more maintainable, testable, and clearer in its intentions.</p><p>Just don&rsquo;t forget the golden rule of software architecture: everything comes with tradeoffs. UseCases add a layer of abstraction that might be overkill for very simple CRUD operations. As with all architectural decisions, consider your specific needs and context before applying them.</p><p>Bonus advice: if what your betters tell you seems off, make sure to do your own research and thinking as well; at the end of the day no-one shares your <code>git blame</code>.</p></div><footer></footer></article></section></div><script type=text/javascript src=https://testimonial.to/js/iframeResizer.min.js></script><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post><input type=email name=email required placeholder=Email spellcheck=false>
<button type=submit>Subscribe</button></form><div id=testemonials class=container style="background:#fff!important;clip-path:inset(0 0 90px 0);padding:24px;border-radius:24px;opacity:0;max-height:0;transition:opacity 1s,max-height 1s"><iframe id=testimonialto-carousel-christian-ekrem-tag-all-light src="https://embed-v2.testimonial.to/carousel/all/christian-ekrem?theme=light&autoplay=off&showmore=on&one-row=on&hideDate=off&same-height=off&tag=all&arrowColor=9BA9B4" frameborder=0 scrolling=no width=100%></iframe></div><script type=text/javascript>location.pathname in{"":!0,"/":!0,"/hire/":!0,"/hire":!0}&&setTimeout(()=>{iFrameResize({log:!1,checkOrigin:!1},"#testimonialto-carousel-christian-ekrem-tag-all-light");const e=document.getElementById("testemonials");e.style.display="block",e.style.opacity=1,e.style.maxHeight="600px"},1e3)</script><footer class=footer><section class=container>© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=🍺 data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Right data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>