<!doctype html><html lang=en><head><title>Chapter 2, Take 2: Why I Changed Course · cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="Rewriting Chapter 2 to focus on discipline by construction over side‑by‑side comparisons, and how early reader feedback shaped the new approach."><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/featured-with-margins.png"><meta name=twitter:title content="Chapter 2, Take 2: Why I Changed Course"><meta name=twitter:description content="Rewriting Chapter 2 to focus on discipline by construction over side‑by‑side comparisons, and how early reader feedback shaped the new approach."><meta property="og:url" content="https://cekrem.github.io/posts/chapter-2-take-2/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="Chapter 2, Take 2: Why I Changed Course"><meta property="og:description" content="Rewriting Chapter 2 to focus on discipline by construction over side‑by‑side comparisons, and how early reader feedback shaped the new approach."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-30T00:00:00+02:00"><meta property="article:modified_time" content="2025-10-30T00:00:00+02:00"><meta property="article:tag" content="Elm"><meta property="article:tag" content="React"><meta property="article:tag" content="Functional Programming"><meta property="article:tag" content="Writing"><meta property="article:tag" content="Book-Notes"><meta property="og:image" content="https://cekrem.github.io/images/featured-with-margins.png"><link rel=canonical href=https://cekrem.github.io/posts/chapter-2-take-2/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.f63b17f16aa5dbf557dd08e6806b0b477d5e6d8f2af64807e14512a12dd2ccaa.css integrity="sha256-9jsX8Wql2/VX3QjmgGsLR31ebY8q9kgH4UUSoS3SzKo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.be284be20943b01514c49cbe3832fe8cc215513c0e5962b1d349102cf16f2c25.css integrity="sha256-vihL4glDsBUUxJy+ODL+jMIVUTwOWWKx00kQLPFvLCU=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (🇳🇴)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/chapter-2-take-2/>Chapter 2, Take 2: Why I Changed Course</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-10-30T00:00:00+02:00>October 30, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
16-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/react/>React</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/functional-programming/>Functional Programming</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/writing/>Writing</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/book-notes/>Book-Notes</a></span></div></div></header><div class=post-content><p>I’m rewriting Chapter 2 of my upcoming book, <a href=https://leanpub.com/elm-for-react-devs class=external-link target=_blank rel=noopener>An Elm Primer for React Developers</a>.</p><p>Not because the original was &ldquo;wrong&rdquo;", but because the frame was off. I started by putting Elm and React side by side, trying to show “the Elm way” next to “the React way.” It felt tidy. It also pushed me into an awkward corner: either I write React the way I used to (which would undercut credibility with seasoned React developers), or I write the best React I can with everything I’ve learned from years in Elm (which would quietly disprove half my own argument). That tension is the point of this rewrite.</p><h3 id=early-access-real-feedback>Early Access, Real Feedback
<a class=heading-link href=#early-access-real-feedback><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Opening drafts early was the best decision I’ve made on this project. Readers called out places where I was “winning” with Elm by quietly applying discipline I had learned in Elm back into the React examples—making the comparison feel stacked. Others asked sharper questions: “Is the goal to prove Elm beats React, or to teach people to think functionally?” That feedback changed Chapter 2.</p><p>The new approach acknowledges something simple and important: a disciplined React app can be excellent. With care, you can avoid the traps. But that’s the rub—React (and more broadly JS/TS) gives you a lot of rope: escape hatches, caveats, and footguns you can manage if you’re careful. Elm removes those options by design. The difference isn’t outcome—disciplined teams can produce great results in both. The difference is slope: how easy is it to slip when you’re tired, rushed, onboarding, or juggling complexity?</p><h3 id=why-not-sidebyside>Why Not Side‑by‑Side?
<a class=heading-link href=#why-not-sidebyside><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Side‑by‑side examples encourage a “who did it better?” posture. That’s not the useful question. The useful question is: which environment makes it harder to accidentally do the wrong thing?</p><p>React gives you choices: mutable vs. immutable patterns, implicit vs. explicit effects, runtime vs. compile‑time checks, types that are tight vs. types that leak <code>any</code> or <code>unknown</code>, escape hatches like <code>as</code> casts, optional chaining that masks branches you should handle, dependency arrays that let stale closures creep in. These are not React’s “fault”; they’re the nature of a flexible ecosystem designed to work for many teams and constraints.</p><p>Elm, by contrast, constrains you. Mutation is off the table. Side effects must be explicit. All branches must be handled. The compiler won’t let you move on until you’ve made your intent precise. You can’t “just ship it” with a maybe‑it’s‑fine type hole; the compiler blocks the door until you’ve resolved the ambiguity.</p><p>So instead of “React vs. Elm,” the rewrite is “discipline by convention vs. discipline by construction.”</p><h3 id=what-the-new-chapter-does>What the New Chapter Does
<a class=heading-link href=#what-the-new-chapter-does><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Clarifies the goal: teach functional discipline in a way that sticks, not win a framework duel.</li><li>Shows realistic paths to success in React—and why the slope is steeper.</li><li>Highlights the unique advantage of Elm: it removes entire categories of mistakes up front.</li><li>Uses examples targeted at common pains React developers feel, then shows how Elm removes the sharp edges.</li></ul><h3 id=the-nuance-that-matters>The Nuance That Matters
<a class=heading-link href=#the-nuance-that-matters><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>The point isn’t that a “perfect” Elm app is better than a “perfect” React app. If you’re deliberate and thoughtful in React, you can build something just as robust.</li><li>The point is that Elm makes sloppy patterns a non‑option. Many things that are “easy mistakes” in JS/TS simply cannot compile in Elm.</li><li>In React, being disciplined is a choice you must repeatedly make. In Elm, it’s the default you must actively opt out of (which you can’t, most of the time).</li></ul><p>That difference is what gives Elm its teaching power. You’re not memorizing rules; you’re building muscle memory under constraints that align with functional principles. Once learned, those habits transfer back to React and JS/TS.</p><h3 id=why-im-writing-it-this-way-now>Why I’m Writing It This Way Now
<a class=heading-link href=#why-im-writing-it-this-way-now><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Honesty: I don’t want to “win” via strawmen or outdated React. You deserve the best version of both worlds.</li><li>Practicality: You shouldn’t have to memorize guardrails to avoid common pitfalls. Elm bakes the guardrails in.</li><li>Transfer: The discipline you learn in Elm is portable. You’ll use it in React, TypeScript, Rust—anywhere.</li></ul><hr><h2 id=the-new-chapter-2>The New Chapter 2
<a class=heading-link href=#the-new-chapter-2><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>In the last chapter, we explored <em>why</em> Elm&rsquo;s constraints enable freedom from bugs. We talked about immutability, exhaustive checking, and compile-time guarantees. Now let&rsquo;s see what those principles look like in actual code.</p><p><strong>Note</strong>: All code examples from this book are available at <a href=https://github.com/cekrem/elm-primer-code-examples class=external-link target=_blank rel=noopener>github.com/cekrem/elm-primer-code-examples</a>, where you can browse, download, and run them locally.</p><p>If you&rsquo;ve been using React for a while, you&rsquo;re familiar with the constant sense of making architectural decisions. Should this be a hook or a reducer? Do I need context here? Should I memoize this callback? Every feature brings a small avalanche of choices, and while that flexibility is powerful, it can also be exhausting.</p><p>Elm takes a radically different approach: it gives you exactly one architecture. Not one <em>recommended</em> architecture, but literally one. Every Elm application—whether it&rsquo;s a simple widget or a 100,000-line production codebase—follows the same pattern. The Elm Architecture (TEA) is built into the language itself.</p><p>This might sound limiting at first. But consider: when there&rsquo;s only one way to do things, you spend less time making decisions and more time solving actual problems. The cognitive load drops dramatically. And surprisingly, this single pattern scales beautifully.</p><blockquote><p><strong>Elm Hook</strong></p><p>React hooks like useState, useReducer, useEffect, useMemo, and useCallback solve problems that don&rsquo;t exist in Elm. <a href=https://guide.elm-lang.org/architecture/ class=external-link target=_blank rel=noopener>The Elm Architecture</a> handles state, effects, and optimization by design. Keep reading to see how!</p></blockquote><h2 id=the-recipe-four-simple-ingredients>The Recipe: Four Simple Ingredients
<a class=heading-link href=#the-recipe-four-simple-ingredients><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Every Elm application is built from exactly four pieces. Think of them as ingredients in a recipe—each one has a specific purpose, and when combined, they create something greater than their parts.</p><p>Here&rsquo;s the complete recipe:</p><ol><li><strong>Model</strong> - What data does your app need?</li><li><strong>Msg</strong> - What events can happen?</li><li><strong>update</strong> - How does your state change?</li><li><strong>view</strong> - How do you display your state?</li></ol><p>That&rsquo;s it. No hooks, no context, no effects management, no memoization. Just these four pieces. Let&rsquo;s look at each one in isolation before we put them together.</p><blockquote><p><strong>A Note Before We Begin</strong></p><p>This chapter shows complete code examples to illustrate the architectural patterns. Don&rsquo;t worry about setting up Elm or typing this yourself yet—that&rsquo;s what Chapter 3 is for. Right now, just focus on understanding the patterns. Think of this as a guided tour before you get hands-on. You&rsquo;ll be writing Elm code yourself very soon.</p></blockquote><h2 id=ingredient-1-model---your-state-shape>Ingredient 1: Model - Your State Shape
<a class=heading-link href=#ingredient-1-model---your-state-shape><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The <code>Model</code> defines <em>all</em> the state in your application. In React terms, it&rsquo;s like combining all your <code>useState</code> and <code>useReducer</code> state into a single data structure.</p><p>Here&rsquo;s the simplest possible model:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>This is a type alias that says &ldquo;Model is a record with one field: count, which is an Int.&rdquo; No null, no undefined—just an integer.</p><p><strong>In React, you might write:</strong></p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff6ac1>interface</span> Model {
</span></span><span style=display:flex><span>  count: <span style=color:#9aedfe>number</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Similar, right? But there&rsquo;s a key difference: in Elm, this type is enforced <em>everywhere</em>. You can&rsquo;t accidentally set <code>count</code> to a string or forget to initialize it, nor can you typecast it as anything else. The compiler checks every usage.</p><p>Here&rsquo;s a slightly more interesting model:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>List</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>Now we&rsquo;re tracking both the current count and its history. Still just a data structure—no logic, no methods, just pure data.</p><p><strong>What you&rsquo;d recognize from React:</strong> This is like defining your component&rsquo;s state shape, but for your entire application. Similar to how Redux has a single state tree, or how you might structure a <code>useReducer</code> state object.</p><h2 id=ingredient-2-msg---things-that-can-happen>Ingredient 2: Msg - Things That Can Happen
<a class=heading-link href=#ingredient-2-msg---things-that-can-happen><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>In React, when a button is clicked, you call a function that directly updates state. In Elm, you create a <em>message</em> that describes what happened.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Increment</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Decrement</span>
</span></span></code></pre></div><p>This isn&rsquo;t a string or an enum—it&rsquo;s a union type. <code>Msg</code> can be <em>exactly</em> one of these values: <code>Increment</code> or <code>Decrement</code>. Nothing else.</p><p>Messages can carry data too:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Increment</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Decrement</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>SetCount</span> <span style=color:#9aedfe>Int</span>
</span></span></code></pre></div><p>Now <code>SetCount</code> carries an integer. When you create a <code>SetCount</code> message, you <em>must</em> provide a number. The type system enforces this.</p><p>Here&rsquo;s a more interesting example:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Increment</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Decrement</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Undo</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Reset</span>
</span></span></code></pre></div><p>We&rsquo;ve added <code>Undo</code> and <code>Reset</code> messages. Notice how each message is a distinct value—you can&rsquo;t confuse them or misspell them. The compiler knows exactly what messages exist in your application.</p><p><strong>What you&rsquo;d recognize from React:</strong> If you&rsquo;ve used Redux or <code>useReducer</code>, you&rsquo;ve seen action types. Messages are similar, but they&rsquo;re compiler-checked union types instead of string constants. You can&rsquo;t dispatch a message that doesn&rsquo;t exist.</p><h2 id=ingredient-3-update---how-state-changes>Ingredient 3: update - How State Changes
<a class=heading-link href=#ingredient-3-update---how-state-changes><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The <code>update</code> function is where all your business logic lives. It takes a message and the current model, and returns a new model.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Increment</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>+</span> <span style=color:#ff9f43>1</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Decrement</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>-</span> <span style=color:#ff9f43>1</span> }
</span></span></code></pre></div><p>Read that type signature: &ldquo;update takes a Msg and a Model, and returns a Model.&rdquo; It&rsquo;s a pure function—same inputs always give same outputs.</p><p>The <code>case</code> expression does pattern matching on the message. If it&rsquo;s <code>Increment</code>, create a new model with count increased by 1. The <code>{ model | count = ... }</code> syntax means &ldquo;create a new record that&rsquo;s a copy of model, but with count changed.&rdquo;</p><p>This isn&rsquo;t mutation—it&rsquo;s creating a new value. The old model is unchanged.</p><p><strong>What you&rsquo;d recognize from React:</strong> This is exactly like a reducer in <code>useReducer</code> or Redux:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff5c57>function</span> reducer(state: <span style=color:#9aedfe>Model</span>, action: <span style=color:#9aedfe>Msg</span>)<span style=color:#ff6ac1>:</span> Model {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>switch</span> (action.<span style=color:#ff6ac1>type</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;INCREMENT&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, count: <span style=color:#9aedfe>state.count</span> <span style=color:#ff6ac1>+</span> <span style=color:#ff9f43>1</span> };
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;DECREMENT&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, count: <span style=color:#9aedfe>state.count</span> <span style=color:#ff6ac1>-</span> <span style=color:#ff9f43>1</span> };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Same pattern! But again, in Elm the compiler forces you to handle <em>all</em> cases. Miss one, and your code won&rsquo;t compile. And though even React beginners know better than to mutate state within a reducer by now, it&rsquo;s still <em>possible</em>, and can lead to all manner of undefined behavior; In Elm it&rsquo;s impossible to mutate.</p><h2 id=ingredient-4-view---rendering-your-state>Ingredient 4: view - Rendering Your State
<a class=heading-link href=#ingredient-4-view---rendering-your-state><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The <code>view</code> function takes your model and returns HTML. It&rsquo;s a pure function—just data in, HTML out.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Decrement</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;-&#34;</span> ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>div</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>fromInt</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span>) ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Increment</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;+&#34;</span> ]
</span></span><span style=display:flex><span>        ]
</span></span></code></pre></div><p>The type signature says &ldquo;view takes a Model and returns Html that can produce Msg values.&rdquo; When you click the button, it creates an <code>Increment</code> or <code>Decrement</code> message.</p><p><strong>What you&rsquo;d recognize from React:</strong> This is your component&rsquo;s render function:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff5c57>function</span> Counter({ count, onIncrement, onDecrement }) {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#ff6ac1>button</span> <span style=color:#57c7ff>onClick</span><span style=color:#ff6ac1>=</span>{onDecrement}&gt;<span style=color:#ff6ac1>-</span>&lt;/<span style=color:#ff6ac1>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#ff6ac1>div</span>&gt;{count}&lt;/<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#ff6ac1>button</span> <span style=color:#57c7ff>onClick</span><span style=color:#ff6ac1>=</span>{onIncrement}&gt;<span style=color:#ff6ac1>+</span>&lt;/<span style=color:#ff6ac1>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The difference? Elm&rsquo;s <code>view</code> is guaranteed to be pure. No side effects, no direct state updates. Just: model goes in, HTML comes out.</p><h2 id=putting-it-all-together-counter-with-undo>Putting It All Together: Counter with Undo
<a class=heading-link href=#putting-it-all-together-counter-with-undo><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Now let&rsquo;s combine these four ingredients into a complete application. We&rsquo;ll build a counter that tracks its history and supports undo.</p><p>Here&rsquo;s the full code (also available in the book&rsquo;s code repository at <a href=https://github.com/cekrem/elm-primer-code-examples/tree/main/02_counter_undo class=external-link target=_blank rel=noopener>02_counter_undo</a>):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>module </span><span style=color:#f3f99d>Main</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#ff5c57>main</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import </span><span style=color:#f3f99d>Browser</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import </span><span style=color:#f3f99d>Html</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#9aedfe>Html</span>, <span style=color:#ff5c57>button</span>, <span style=color:#ff5c57>div</span>, <span style=color:#ff5c57>text</span>)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import </span><span style=color:#f3f99d>Html.Events</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#ff5c57>onClick</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- MODEL</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>List</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff9f43>0</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> []
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- MSG</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Increment</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Decrement</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Undo</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Reset</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- UPDATE</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Increment</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>+</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Decrement</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>-</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Undo</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>                [] <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff5c57>model</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#ff5c57>previousCount</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>rest</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>previousCount</span>
</span></span><span style=display:flex><span>                    , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>rest</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Reset</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff5c57>init</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- VIEW</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Decrement</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;-&#34;</span> ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>div</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>fromInt</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span>) ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Increment</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;+&#34;</span> ]
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Undo</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;Undo&#34;</span> ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Reset</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;Reset&#34;</span> ]
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>div</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#5af78e>&#34;History: &#34;</span> <span style=color:#57c7ff>++</span> <span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>fromInt</span> (<span style=color:#9aedfe>List</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>length</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>) <span style=color:#57c7ff>++</span> <span style=color:#5af78e>&#34; items&#34;</span>) ]
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- MAIN</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>main </span><span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Program</span> () <span style=color:#9aedfe>Model</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>main </span><span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Browser</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>sandbox</span>
</span></span><span style=display:flex><span>        { <span style=color:#ff5c57>init</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>init</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>view</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>view</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>update</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>update</span>
</span></span><span style=display:flex><span>        }
</span></span></code></pre></div><p>We store the current count and a list of previous counts. When you increment or decrement, we save the old value before changing it.</p><h3 id=messages-describe-all-possible-actions>Messages Describe All Possible Actions
<a class=heading-link href=#messages-describe-all-possible-actions><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Increment</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Decrement</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Undo</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Reset</span>
</span></span></code></pre></div><p>Four things can happen in this app. Nothing else. The compiler knows this.</p><h3 id=update-handles-each-case-explicitly>Update Handles Each Case Explicitly
<a class=heading-link href=#update-handles-each-case-explicitly><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#78787e>-- you can &#34;case match&#34; on a union type like `Msg`:</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Increment</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>+</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Decrement</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>-</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Undo</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#78787e>-- ...and you can case match on a list,</span>
</span></span><span style=display:flex><span>            <span style=color:#78787e>-- handling empty lists differently than non-empty ones:</span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>                <span style=color:#78787e>-- If there&#39;s no history:</span>
</span></span><span style=display:flex><span>                [] <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff5c57>model</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#78787e>-- If there&#39;s at least one entry (`previousCount`):</span>
</span></span><span style=display:flex><span>                <span style=color:#ff5c57>previousCount</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>rest</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    { <span style=color:#ff5c57>count</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>previousCount</span>
</span></span><span style=display:flex><span>                    , <span style=color:#ff5c57>history</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>rest</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Reset</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff5c57>init</span>
</span></span></code></pre></div><p>Notice the <code>Undo</code> case: we pattern match on the history. If it&rsquo;s empty, do nothing. If it has items, extract the previous count and the rest of the list. This is exhaustive—we handle both possibilities.</p><p>The <code>::</code> operator prepends an item to a list. So <code>model.count :: model.history</code> means &ldquo;create a new list with the current count at the front, followed by the existing history.&rdquo;</p><h3 id=view-renders-based-on-model>View Renders Based on Model
<a class=heading-link href=#view-renders-based-on-model><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Decrement</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;-&#34;</span> ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>div</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>fromInt</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>count</span>) ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Increment</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;+&#34;</span> ]
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Undo</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;Undo&#34;</span> ]
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>button</span> [ <span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>Reset</span> ] [ <span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;Reset&#34;</span> ]
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>div</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#5af78e>&#34;History: &#34;</span> <span style=color:#57c7ff>++</span> <span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>fromInt</span> (<span style=color:#9aedfe>List</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>length</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>history</span>) <span style=color:#57c7ff>++</span> <span style=color:#5af78e>&#34; items&#34;</span>) ]
</span></span><span style=display:flex><span>        ]
</span></span></code></pre></div><p>Pure function. Model goes in, HTML comes out. No hooks, no effects, no memoization needed.</p><h2 id=the-elm-runtime-loop>The Elm Runtime Loop
<a class=heading-link href=#the-elm-runtime-loop><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Here&rsquo;s what happens when you run this application:</p><ol><li>Elm calls <code>init</code> to get the initial model: <code>{ count = 0, history = [] }</code></li><li>Elm calls <code>view</code> with that model to generate HTML</li><li>Elm renders the HTML to the page</li><li>User clicks the &ldquo;+&rdquo; button</li><li>The button&rsquo;s <code>onClick Increment</code> creates an <code>Increment</code> message</li><li>Elm calls <code>update Increment model</code></li><li><code>update</code> returns a new model: <code>{ count = 1, history = [0] }</code></li><li>Elm calls <code>view</code> again with the new model</li><li>Elm efficiently updates only the changed parts of the DOM</li><li>Back to step 4, waiting for the next interaction</li></ol><p>You never write this loop yourself. You just provide three pure functions (<code>init</code>, <code>update</code>, <code>view</code>), and Elm handles the rest.</p><h2 id=what-react-developers-already-know>What React Developers Already Know
<a class=heading-link href=#what-react-developers-already-know><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>If you&rsquo;ve used React for a while, TEA will feel familiar:</p><p><strong>useState → Model</strong>
Instead of spreading state across multiple hooks, you define one data structure.</p><p><strong>useReducer → update</strong>
If you&rsquo;ve used reducers, you already understand <code>update</code>. Same pattern: take current state and an action, return new state. The difference is that Elm&rsquo;s pattern matching makes it impossible to miss a case.</p><p><strong>Props and callbacks → Msg</strong>
Instead of passing callbacks down through props, you dispatch messages. Events flow up as messages, not function calls.</p><p><strong>Redux → TEA</strong>
Redux was literally inspired by Elm. Dan Abramov saw TEA and brought those ideas to React. The difference? Redux is a library you add on top of React. TEA is built into Elm—you can&rsquo;t <em>not</em> use it.</p><h2 id=what-makes-tea-different>What Makes TEA Different
<a class=heading-link href=#what-makes-tea-different><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Here&rsquo;s what you get that React doesn&rsquo;t provide by default:</p><p><strong>One way to do things</strong>
No debate about hooks vs reducers vs context. Every Elm app uses TEA. This removes cognitive load—you don&rsquo;t spend time choosing patterns.</p><p><strong>Impossible to forget a case</strong>
Add a new message? The compiler tells you every place you need to handle it. Can&rsquo;t forget, can&rsquo;t miss one.</p><p><strong>No scattered logic</strong>
All business logic lives in <code>update</code>. No logic in event handlers, no side effects in render, no effects synchronizing state. One place, clear flow.</p><p><strong>Pure functions everywhere</strong>
<code>update</code> and <code>view</code> are pure functions—same inputs always give same outputs. This makes testing trivial and reasoning straightforward.</p><p><strong>Type-safe messages</strong>
You can&rsquo;t dispatch a message that doesn&rsquo;t exist. You can&rsquo;t forget to include data a message needs. The types enforce correctness.</p><h2 id=the-price-of-explicitness>The Price of Explicitness
<a class=heading-link href=#the-price-of-explicitness><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>TEA is more explicit than React. You write out every case. You define your messages up front. You can&rsquo;t just add an inline handler that updates state directly.</p><p>This explicitness trades verbosity for safety. The counter example above is about 80 lines. In React with hooks, you might do it in 40 lines.</p><p>But here&rsquo;s the thing: as your application grows, that explicitness scales beautifully. The 80-line Elm app uses the same patterns as a 100,000-line Elm app. There&rsquo;s no complexity cliff, no point where you need to refactor to Redux or introduce new patterns.</p><p>In <a href=https://amzn.to/3Lk4wtr class=external-link target=_blank rel=noopener>The Pragmatic Programmer</a>, Andy Hunt and Dave Thomas argue that good design is whatever makes your code <strong>Easy To Change</strong>. TEA is incredibly easy to change because:</p><ol><li>The compiler guides you through every change</li><li>All state changes flow through one function</li><li>Pure functions are trivial to test</li><li>Pattern matching forces explicit handling</li></ol><p>You write more code up front, but you spend less time debugging, refactoring, and hunting down edge cases.</p><h2 id=what-you-just-learned-the-fp-hiding-in-plain-sight>What You Just Learned (The FP Hiding in Plain Sight)
<a class=heading-link href=#what-you-just-learned-the-fp-hiding-in-plain-sight><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>As you explored The Elm Architecture, you learned core functional programming concepts without realizing it:</p><p><strong>Pure functions</strong>
Both <code>update</code> and <code>view</code> are pure—same inputs always give same outputs. No hidden state, no side effects.</p><p><strong>Immutability</strong>
You never mutate the model. You always create new values. The <code>{ model | count = ... }</code> syntax creates a new record.</p><p><strong>Algebraic data types</strong>
The <code>Msg</code> type is a union type (also called a sum type). It says &ldquo;a Msg is one of these options, and nothing else.&rdquo;</p><p><strong>Pattern matching</strong>
The <code>case</code> expression destructures data and forces you to handle all possibilities. The compiler checks exhaustiveness.</p><p><strong>Explicit state transitions</strong>
State doesn&rsquo;t change in random places. It flows through one function: <code>update</code>. This makes state changes predictable and testable.</p><p>These are the same concepts you&rsquo;d learn in Haskell, F#, OCaml, or Clojure. But you learned them by building a working UI, not by studying academic papers.</p><h2 id=whats-next>What&rsquo;s Next
<a class=heading-link href=#whats-next><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>In this chapter, you learned The Elm Architecture: the four ingredients that every Elm application uses. You saw how Model, Msg, update, and view work together to create reliable, predictable applications.</p><p>But we&rsquo;ve only scratched the surface. The counter example used <code>Browser.sandbox</code>, which can&rsquo;t talk to the outside world. No HTTP requests, no random numbers, no JavaScript interop – or in Elm terms: No <code>Cmd</code>s (commands). That&rsquo;s coming in later chapters.</p><p>In Chapter 3, you&rsquo;ll build your first Elm app and experience the compiler-driven workflow firsthand. You&rsquo;ll set up your environment, write code, and see how the compiler guides you to working solutions.</p><p>The theory is helpful, but the real learning happens when you write Elm yourself.</p><hr><p>That&rsquo;s better, right? Thanks to everyone who read the early drafts and told me where it rang false or felt slanted. That feedback made this rewrite necessary—and better.</p><p>If you’ve got more thoughts, I’m still listening.</p></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=🍺 data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>