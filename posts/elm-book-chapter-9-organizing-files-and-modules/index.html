<!doctype html><html lang=en><head><title>Organizing Files and Modules in Elm: Building an Advent Calendar Â· cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="Unlearning JavaScript pain-driven file splitting habits, and building an Advent Calendar with Elm"><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/banner.jpg"><meta name=twitter:title content="Organizing Files and Modules in Elm: Building an Advent Calendar"><meta name=twitter:description content="Unlearning JavaScript pain-driven file splitting habits, and building an Advent Calendar with Elm"><meta property="og:url" content="https://cekrem.github.io/posts/elm-book-chapter-9-organizing-files-and-modules/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="Organizing Files and Modules in Elm: Building an Advent Calendar"><meta property="og:description" content="Unlearning JavaScript pain-driven file splitting habits, and building an Advent Calendar with Elm"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-01T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-01T00:00:00+00:00"><meta property="article:tag" content="Elm"><meta property="article:tag" content="React"><meta property="article:tag" content="Functional Programming"><meta property="article:tag" content="Book"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Tasks"><meta property="og:image" content="https://cekrem.github.io/images/banner.jpg"><link rel=canonical href=https://cekrem.github.io/posts/elm-book-chapter-9-organizing-files-and-modules/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.e8eb08b92eec0f2a19c8cbe4eda1f38c703416996d08f55900541ba798921e5b.css integrity="sha256-6OsIuS7sDyoZyMvk7aHzjHA0FpltCPVZAFQbp5iSHls=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a93347c2833a476d1c25ae74bed3f80024fc1eaf1a33d084c2211065513e5c42.css integrity="sha256-qTNHwoM6R20cJa50vtP4ACT8Hq8aM9CEwiEQZVE+XEI=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/how-i-met-jesus/>Jesus!?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (ðŸ‡³ðŸ‡´)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/elm-book-chapter-9-organizing-files-and-modules/>Organizing Files and Modules in Elm: Building an Advent Calendar</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-12-01T00:00:00Z>December 1, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
6-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/react/>React</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/functional-programming/>Functional Programming</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/book/>Book</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/architecture/>Architecture</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/tasks/>Tasks</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/file-organization/>File Organization</a></span></div></div></header><div class=post-content><p>We&rsquo;re officially in Part III of the book now, where we shift from systematic concept exploration to building real applications. This chapter asks you to unlearn something you probably picked up from years of JavaScript development: the instinct to split code into multiple files at arbitrary line counts.</p><p>As usual, <a href=https://leanpub.com/elm-for-react-devs class=external-link target=_blank rel=noopener>the book can be found and bought @ leanpub</a>.</p><p>(And as usual, the formatting is slightly more adequate in the actual book than on this Hugo blog, but we&rsquo;ll make do.)</p><hr><h1 id=chapter-9-organizing-files-and-modules>Chapter 9: Organizing Files and Modules
<a class=heading-link href=#chapter-9-organizing-files-and-modules><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>We&rsquo;re changing gears now. In Parts I and II, we explored Elm&rsquo;s fundamentals systematicallyâ€”one concept at a time, building up from pure functions to side effects to structured data. That approach served us well for learning the language itself.</p><p>But real applications don&rsquo;t grow that way. Real applications start with a vague idea, evolve through iteration, and accumulate features as you discover what you actually need. They require techniques and patterns as you encounter problems, not in alphabetical order.</p><p>So in Part III, we&rsquo;ll build real applications and introduce concepts as we need them. We&rsquo;ll learn about <code>Task</code>s when we need to work with time. We&rsquo;ll explore modules when our data structures demand their own space. We&rsquo;ll discover patterns as they emerge naturally from the problems we&rsquo;re solving.</p><p>This chapter, in particular, asks you to unlearn something. Something you probably picked up from years of JavaScript development, internalized through pain and production incidents, and now follow almost instinctively.</p><p>We&rsquo;re going to question whenâ€”and whyâ€”you should split your code into multiple files.</p><h2 id=moving-beyond-the-single-file-approach>Moving Beyond the Single-File Approach?
<a class=heading-link href=#moving-beyond-the-single-file-approach><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>So far, we&rsquo;ve been dealing with relatively small apps that will fit in a single file regardless of language or programming paradigm. But what happens when we scale our Elm apps and create more complex things?</p><p>In JavaScript workflows, there are certain practices around organizing code. I propose that quite a few of these have very little to do with good architecture, and much to do with trying to mitigate one of two major pain points:</p><h3 id=javascript-pain-point-i-sneaky-mutations>JavaScript Pain Point I: &ldquo;Sneaky Mutations&rdquo;
<a class=heading-link href=#javascript-pain-point-i-sneaky-mutations><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>As we&rsquo;ve addressed thoroughly already, JavaScript is quite dynamic and extremely liberal. As our files increase in length, the cognitive load required for something as trivial as <em>avoiding unintentional mutations</em> increases exponentially. All it takes is a misplaced (and innocent-looking!) <code>const sortedArray = oldArray.sort()</code><sub><sup>*</sup></sub> to create a bit of undefined behavior.</p><p>A common rule of thumb to mitigate is this:</p><blockquote><p>Prefer shorter files (so you can double-check everything whenever making a change)</p></blockquote><p>After all, if your files are shorter, skimming through them to look for foxes in the garden is a more realistic endeavor. Right?</p><h3 id=javascript-pain-point-ii-refactoring-is-hard-and-quite-dangerous>JavaScript Pain Point II: Refactoring is Hard and Quite Dangerous
<a class=heading-link href=#javascript-pain-point-ii-refactoring-is-hard-and-quite-dangerous><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Given the above premise, it follows that having an iterative approach to organizing code, components, modules and directories is <em>unsafe</em>; large refactors, we&rsquo;ve learned, equals being quite screwed quite fast. So we need to be very mindful even before we know for certain just exactly we&rsquo;re building, how portable it needs to be and what it will interact with. YAGNI (the &ldquo;You Ain&rsquo;t Gonna Need It&rdquo;-principle) is out the window, and so, I guess, is agile development&mldr;?</p><p>Sadly, but not without reason, we internalize the following principle as well:</p><blockquote><p>Get Architecture Right From The Start (because refactoring might actually kill you)</p></blockquote><p>Anyone who&rsquo;s deployed any substantial JavaScript project to production after a large &ldquo;Noop&rdquo; refactor can empathize, and will nod a tired head in agreement. The pain and the fear is real!</p><h2 id=elm-is-different>Elm is Different
<a class=heading-link href=#elm-is-different><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>As we&rsquo;re not writing a JavaScript application, I have some good news for you: There is a better way! Let&rsquo;s address the principles and underlying pain points right away:</p><ul><li>Chance of sneaky mutations in Elm: 0%</li><li>Refactoring in Elm is <em>cheap</em>, <em>safe</em> and <em>reliable</em></li></ul><p>This makes growing an Elm codebase fundamentally different. There are reasons for splitting up files, but line count isn&rsquo;t really one of them. And there are reasons to think about architecture early, but you can also make large-scale changes as you go. Good architecture tends to emerge naturally from any sane Elm application unless you deliberately work against it.</p><p>So rather than splitting at a certain arbitrary code length threshold, we can discover other and more relevant points where a split makes sense. We can split around data structures, and delegate complexity surrounding each structure to its own file (with the added bonus point of only exporting what we need, and keeping implementation details hidden from consumers).</p><p>In fact this is Evan&rsquo;s main advice on this:</p><blockquote><p>Build modules around data structures. Do not worry about file length.</p><p>â€“ Evan Czaplicki, Creator of Elm</p></blockquote><p>Quite the paradigm shift. And honestly? It&rsquo;s liberating. You model your app according to its actual structure, not your fear of forgetting something. You&rsquo;re not limited by how much you can hold in your head at once. You build architecture like playing Super Marioâ€”eager, experimental, knowing that if you die you can simply try again.</p><p>This is a good time to practice some more, and see how this plays out in a growing application.</p><h2 id=lets-build-an-advent-calendar-app>Let&rsquo;s Build an Advent Calendar App
<a class=heading-link href=#lets-build-an-advent-calendar-app><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>To help us unlearn some of these pain point-based habits regarding code organization and file splitting, let&rsquo;s create a slightly more useful application.</p><p>At the time of writing, November is rapidly coming to an end, and I feel like making a new Advent Calendar for my wife. And as we all know, Elm is <del>the best tool for the job, and a lot more cozy and romantic than anything physical you can hang on the wall</del> very fun to write, so let&rsquo;s simply code one!</p><h2 id=basic-advent-calendar-spec>Basic Advent Calendar Spec
<a class=heading-link href=#basic-advent-calendar-spec><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>a header with a title, perhaps with the current year to make it feel up to date?</li><li>24 slots, each with something fun/nice inside (not sure what yet)</li><li>slots should be impossible to open early! This is important!</li><li>Nice-to-have: animated snow falling?</li></ul><p>Hopefully we&rsquo;ll learn that 1) keeping this entire app in one file is <em>fine</em>, because we don&rsquo;t have to worry about tricky refactoring or sneaky mutations, and 2) splitting it into multiple files might make sense <em>for other reasons</em>, reasons we will get back to shortly.</p><p><sub><sup>*: Array.prototype.sort() actually sorts in place, <em>in addition to</em> returning the sorted array</sup></sub></p><p>[&mldr;] Read the rest of this chapter in <a href=https://leanpub.com/elm-for-react-devs class=external-link target=_blank rel=noopener>the book @ leanpub</a></p><hr><h2 id=the-actual-advent-calendar-app>The actual Advent Calendar app
<a class=heading-link href=#the-actual-advent-calendar-app><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>And here it is! <a href=https://cekrem.github.io/advent/ class=external-link target=_blank rel=noopener>The actual Advent Calendar for 2025 - cekrem.github.io/advent</a> the rest of this chapter walks through the implementation step by step, including working with Tasks for date/time handling.</p></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post onsubmit=onSubscribe()><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>Â© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=ðŸº data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script><script>!function(e,t){var n,s,o,i;t.__SV||window.posthog&&window.posthog.__loaded||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(n=e.createElement("script")).type="text/javascript",n.crossOrigin="anonymous",n.async=!0,n.src=r.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var l=t;for(0[0]!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),s=0;s<o.length;s++)d(l,o[s]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_AHy7NSMntJJLr0hUSCwdUS1eRq6SaEqacK1Mzzf36ED",{api_host:"https://eu.i.posthog.com",defaults:"2025-05-24",person_profiles:"identified_only"});function onSubscribe(){posthog.capture("new subscriber")}</script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>