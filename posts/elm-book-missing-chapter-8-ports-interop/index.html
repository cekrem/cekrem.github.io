<!doctype html><html lang=en><head><title>An Elm Primer: The missing chapter on JavaScript interop Â· cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="Let's treat JavaScript and browsers as flaky infrastructure, and act accordingly"><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/banner.jpg"><meta name=twitter:title content="An Elm Primer: The missing chapter on JavaScript interop"><meta name=twitter:description content="Let's treat JavaScript and browsers as flaky infrastructure, and act accordingly"><meta property="og:url" content="https://cekrem.github.io/posts/elm-book-missing-chapter-8-ports-interop/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="An Elm Primer: The missing chapter on JavaScript interop"><meta property="og:description" content="Let's treat JavaScript and browsers as flaky infrastructure, and act accordingly"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-11-18T00:00:00+00:00"><meta property="article:tag" content="Elm"><meta property="article:tag" content="React"><meta property="article:tag" content="Functional Programming"><meta property="article:tag" content="Book"><meta property="article:tag" content="Typescript"><meta property="article:tag" content="Architecture"><meta property="og:image" content="https://cekrem.github.io/images/banner.jpg"><link rel=canonical href=https://cekrem.github.io/posts/elm-book-missing-chapter-8-ports-interop/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.e8eb08b92eec0f2a19c8cbe4eda1f38c703416996d08f55900541ba798921e5b.css integrity="sha256-6OsIuS7sDyoZyMvk7aHzjHA0FpltCPVZAFQbp5iSHls=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a93347c2833a476d1c25ae74bed3f80024fc1eaf1a33d084c2211065513e5c42.css integrity="sha256-qTNHwoM6R20cJa50vtP4ACT8Hq8aM9CEwiEQZVE+XEI=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/how-i-met-jesus/>Jesus!?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (ðŸ‡³ðŸ‡´)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/elm-book-missing-chapter-8-ports-interop/>An Elm Primer: The missing chapter on JavaScript interop</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-11-18T00:00:00Z>November 18, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
16-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/react/>React</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/functional-programming/>Functional Programming</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/book/>Book</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/typescript/>Typescript</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/architecture/>Architecture</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/ports-and-adapters/>Ports and Adapters</a></span></div></div></header><div class=post-content><p>I&rsquo;ve been having a week off from working with my book, mainly to celebrate the initial completion of parts I and II (out of IV). But it turns out I had a slight <code>git push</code> connection error on my private Macbook after adding the last chapter so what I actually published was less than all of part II: chapter 8 on ports and javascript interop was missing.</p><p>This serves as a reminder that the outside world is not to be trusted, and that any interaction and side-effect can (and will, from time to time) fail â€“ even something as ordinary as a <code>git push</code>. Which happens to be a major theme in the missing chapter, humbly presented to you below.</p><p>As usual, <a href=https://leanpub.com/elm-for-react-devs class=external-link target=_blank rel=noopener>the book can be found and bought @ leanpub</a>.</p><p>(And as usual, the formatting is slightly more adequate in the actual book than on this Hugo blog, but we&rsquo;ll make do.)</p><hr><h1 id=chapter-8-javascript-interop-ports-and-flags>Chapter 8: JavaScript Interop: Ports and Flags
<a class=heading-link href=#chapter-8-javascript-interop-ports-and-flags><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><blockquote><blockquote><p><strong>Elm Hook</strong></p><p>Elm treats JavaScript like infrastructure: useful but untrusted. Ports and flags let you tap into the JavaScript ecosystem while keeping Elm&rsquo;s guarantees intact. Your core logic stays pure and safe.</p></blockquote></blockquote><h2 id=javascript-as-infrastructure>JavaScript as Infrastructure
<a class=heading-link href=#javascript-as-infrastructure><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Here&rsquo;s something that might surprise you: Elm treats JavaScriptâ€”and even the browser itselfâ€”as infrastructure. Not as a trusted part of your application, but as an external dependency that needs careful handling.</p><p>In React, you freely call browser APIs, import npm packages, and mix third-party code directly into your components. It&rsquo;s all JavaScript, so it all gets the same level of trust. But Elm takes a different view: anything outside the Elm runtime is potentially unreliable. It might throw exceptions. It might return unexpected types. It might fail in ways you can&rsquo;t predict at compile time.</p><p>So Elm keeps that world at arm&rsquo;s length. More ceremony and verbosity? Sure. But your app stays clean and pure.</p><p>This chapter represents the last foundational piece you need before taking Elm to the next level. You&rsquo;ve learned the architecture, built apps with HTTP and JSON, and now you&rsquo;ll see how to bridge the gap between Elm and the wider JavaScript ecosystem. After this, you&rsquo;ll have everything you need to start building real applications and learning by doing. The rest is about scale, patterns, and experienceâ€”not new concepts.</p><h2 id=upgrading-our-build-for-manual-bootstrapping>Upgrading Our Build for Manual Bootstrapping
<a class=heading-link href=#upgrading-our-build-for-manual-bootstrapping><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>So far, we&rsquo;ve been compiling our Elm apps directly to HTML without supplying an input, which by default means that it will be compiled into a self contained <code>index.html</code>. This works great for simple apps, but it doesn&rsquo;t give us control over how the app initializes. We can&rsquo;t pass in flags, and we can&rsquo;t set up ports.</p><p>For this chapter, we&rsquo;ll compile to JavaScript instead, and create our own <code>index.html</code>:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff6ac1>[</span>npx <span style=color:#ff6ac1>]</span>elm make src/Main.elm --output<span style=color:#ff6ac1>=</span>main.js
</span></span></code></pre></div><p>This gives us a JavaScript module we can bootstrap manually in our HTML. We&rsquo;ll create an <code>index.html</code> file that loads <code>main.js</code> and initializes our Elm app with whatever setup we needâ€”flags, ports, or both.</p><p>Here&rsquo;s the basic pattern:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#78787e>&lt;!doctype html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#ff6ac1>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>meta</span> <span style=color:#57c7ff>charset</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;UTF-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>title</span>&gt;Elm App&lt;/<span style=color:#ff6ac1>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>div</span> <span style=color:#57c7ff>id</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;app&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span> <span style=color:#57c7ff>src</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;main.js&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>const</span> app <span style=color:#ff6ac1>=</span> Elm.Main.init({
</span></span><span style=display:flex><span>        node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>        flags<span style=color:#ff6ac1>:</span> <span style=color:#ff6ac1>null</span>, <span style=color:#78787e>// this is where flags go!
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>      });
</span></span><span style=display:flex><span>    &lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#ff6ac1>html</span>&gt;
</span></span></code></pre></div><p>That <code>Elm.Main.init()</code> call is where the magic happens. It&rsquo;s our gateway to flags and ports.</p><h2 id=flags-as-program-input>Flags as Program Input
<a class=heading-link href=#flags-as-program-input><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Think of flags like command-line arguments for your Elm app. When you run a CLI program, some can work with or without arguments:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls          <span style=color:#78787e># works fine</span>
</span></span><span style=display:flex><span>ls -la      <span style=color:#78787e># works with flags</span>
</span></span></code></pre></div><p>Others require arguments to function:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl        <span style=color:#78787e># error: needs a URL</span>
</span></span><span style=display:flex><span>curl https://api.example.com  <span style=color:#78787e># works</span>
</span></span></code></pre></div><p>Elm flags work the same way. Your app can accept optional configuration, or it can require certain data to even start.</p><h3 id=a-simple-flag-example>A Simple Flag Example
<a class=heading-link href=#a-simple-flag-example><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Let&rsquo;s build a greeting app that accepts a username flag. Create a new Elm file:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>module </span><span style=color:#f3f99d>Main</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#ff5c57>main</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import </span><span style=color:#f3f99d>Browser</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import </span><span style=color:#f3f99d>Html</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#9aedfe>Html</span>, <span style=color:#ff5c57>div</span>, <span style=color:#ff5c57>h</span><span style=color:#ff9f43>1</span>, <span style=color:#ff5c57>text</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Flags</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>username</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>username</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Flags</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#ff5c57>flags</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    ( { <span style=color:#ff5c57>username</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>flags</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>username</span> }
</span></span><span style=display:flex><span>    , <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#ff5c57>h</span><span style=color:#ff9f43>1</span> [] [ <span style=color:#ff5c57>text</span> (<span style=color:#5af78e>&#34;Hello, &#34;</span> <span style=color:#57c7ff>++</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>username</span> <span style=color:#57c7ff>++</span> <span style=color:#5af78e>&#34;!&#34;</span>) ]
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#ff5c57>msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>_</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    ( <span style=color:#ff5c57>model</span>, <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>main </span><span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Program</span> <span style=color:#9aedfe>Flags</span> <span style=color:#9aedfe>Model</span> <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>main </span><span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Browser</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>element</span>
</span></span><span style=display:flex><span>        { <span style=color:#ff5c57>init</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>init</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>view</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>view</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>update</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>update</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>subscriptions</span> <span style=color:#57c7ff>=</span> <span style=color:#57c7ff>\</span><span style=color:#ff5c57>_</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Sub</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>        }
</span></span></code></pre></div><p>Notice three key changes from our previous apps:</p><ol><li><strong><code>type alias Flags</code></strong> defines what data we expect from JavaScript</li><li><strong><code>init : Flags -> ( Model, Cmd Msg )</code></strong> receives flags as its first argument</li><li><strong><code>main : Program Flags Model Msg</code></strong> declares that this program requires flags</li></ol><p>Now compile it:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>elm make src/Main.elm --output<span style=color:#ff6ac1>=</span>main.js
</span></span></code></pre></div><p>And bootstrap it in <code>index.html</code>:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#78787e>&lt;!doctype html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#ff6ac1>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>meta</span> <span style=color:#57c7ff>charset</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;UTF-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>title</span>&gt;Greeting App&lt;/<span style=color:#ff6ac1>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>div</span> <span style=color:#57c7ff>id</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;app&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span> <span style=color:#57c7ff>src</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;main.js&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>const</span> app <span style=color:#ff6ac1>=</span> Elm.Main.init({
</span></span><span style=display:flex><span>        node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>        flags<span style=color:#ff6ac1>:</span> {
</span></span><span style=display:flex><span>          username<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;Christian&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    &lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#ff6ac1>html</span>&gt;
</span></span></code></pre></div><p>If you open <code>index.html</code> in your browser, you&rsquo;ll see &ldquo;Hello, Christian!&rdquo;</p><p>The <code>flags</code> object we pass to <code>Elm.Main.init()</code> gets validated against our <code>Flags</code> type alias. If JavaScript passes the wrong shapeâ€”say, <code>{ name: "Christian" }</code> instead of <code>{ username: "Christian" }</code>â€”Elm will catch it at runtime and refuse to start the app. You&rsquo;ll see an error in the console explaining exactly what went wrong.</p><p>This is Elm&rsquo;s boundary protection in action. JavaScript is untrusted infrastructure, so Elm validates everything that crosses the border.</p><h3 id=optional-flags>Optional Flags
<a class=heading-link href=#optional-flags><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>What if you want flags to be optional? Use <code>Maybe</code>:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Flags</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>username</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Maybe</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Flags</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#ff5c57>flags</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    ( { <span style=color:#ff5c57>username</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Maybe</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>withDefault</span> <span style=color:#5af78e>&#34;Guest&#34;</span> <span style=color:#ff5c57>flags</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>username</span> }
</span></span><span style=display:flex><span>    , <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><p>Now your app works with or without a username:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#78787e>// With username
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>Elm.Main.init({
</span></span><span style=display:flex><span>  node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>  flags<span style=color:#ff6ac1>:</span> { username<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;Christian&#34;</span> },
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// Without username (shows &#34;Guest&#34;)
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>Elm.Main.init({
</span></span><span style=display:flex><span>  node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>  flags<span style=color:#ff6ac1>:</span> { username<span style=color:#ff6ac1>:</span> <span style=color:#ff6ac1>null</span> },
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>These examples use plain data primitives, but flags can also contain complex JSON data (and we learned in the previous chapter how to decode that). In fact, most times for a production app, JSON is what you want.</p><h3 id=common-flag-patterns>Common Flag Patterns
<a class=heading-link href=#common-flag-patterns><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>In real applications, flags typically carry:</p><ul><li><strong>Authentication data</strong>: tokens, user IDs, session info</li><li><strong>Environment config</strong>: API URLs, feature flags, debug modes</li><li><strong>Initialization state</strong>: data from localStorage, server-rendered content</li><li><strong>Browser capabilities</strong>: screen size, timezone, locale</li></ul><p>Here&rsquo;s a more realistic flags structure:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Flags</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>apiUrl</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>userToken</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Maybe</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>features</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>List</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>timestamp</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>The key insight: flags are for data that exists <em>before</em> your Elm app starts. Once your app is running, you&rsquo;ll use ports for ongoing communication with JavaScript.</p><p>We&rsquo;ll leave flags be for the present, and spend the rest of our chapter on ports.</p><h2 id=ports-for-communicating-with-javascript>Ports for Communicating with JavaScript
<a class=heading-link href=#ports-for-communicating-with-javascript><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>If you&rsquo;ve ever been exposed to SOLID design principles, Clean Architecture or any form of large scale systems engineering, chances are you&rsquo;ve heard of <a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29 class=external-link target=_blank rel=noopener>Ports and Adapters</a>. Whether that&rsquo;s what Evan had in mind when choosing the &ldquo;port&rdquo; term is not certain<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, but there&rsquo;s a lot of overlap in the mental model in any case. A port in both regards supplies <em>a means for &ldquo;external devices&rdquo; to connect to our app in a controlled manner</em>. Note that even with the immense care Elm takes in approaching communication with JavaScript in a safe way, you&rsquo;re still required to mark modules containing ports with the <code>port</code> prefix to signal clearly that they are doing so.</p><p>Just as in the Ports and Adapters (or <em>Hexagonal</em> Architecture), ports can be either <em>inbound</em> or <em>outbound</em>:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff6ac1>module</span> <span style=color:#9aedfe>Main</span> <span style=color:#ff5c57>exposing</span> <span style=color:#57c7ff>(..)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- Elm â†’ JavaScript: Elm sends a `String`</span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- through the JavaScript port</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff5c57>copyToClipboard</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- JavaScript â†’ Elm: JavaScript sends a `Bool` back</span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- to indicate whether the operation was successful</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff5c57>clipboardResult</span> <span style=color:#57c7ff>:</span> (<span style=color:#9aedfe>Bool</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#ff5c57>msg</span>) <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Sub</span> <span style=color:#9aedfe>Msg</span>
</span></span></code></pre></div><p>You&rsquo;ve probably figured by now that we&rsquo;ll dive into how to send and receive via ports by implementing the last feature to our LGTM Generator: copy quote to clipboard!</p><h2 id=adding-clipboard-support-to-the-lgtm-generator>Adding Clipboard Support to the LGTM Generator
<a class=heading-link href=#adding-clipboard-support-to-the-lgtm-generator><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Let&rsquo;s complete the LGTM generator by adding real clipboard support using ports. You can find the complete source code for this chapter in the accompanying repo: <a href=https://github.com/cekrem/elm-primer-code-examples class=external-link target=_blank rel=noopener>github.com/cekrem/elm-primer-code-examples</a>, but try not to look at it if you&rsquo;re not <em>completely</em> stuck. We&rsquo;ll proceed at a moderate tempo, and introduce new concepts one at a time.</p><p>Start by adding this basic <code>index.html</code> to your project root:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#78787e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#ff6ac1>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>meta</span> <span style=color:#57c7ff>charset</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;UTF-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>title</span>&gt;LGTM Generator with ports!&lt;/<span style=color:#ff6ac1>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>div</span> <span style=color:#57c7ff>id</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;app&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span> <span style=color:#57c7ff>src</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;main.js&#34;</span>&gt;&lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>const</span> app <span style=color:#ff6ac1>=</span> Elm.Main.init({
</span></span><span style=display:flex><span>        node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    &lt;/<span style=color:#ff6ac1>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#ff6ac1>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#ff6ac1>html</span>&gt;
</span></span></code></pre></div><p>Then, as usual, let&rsquo;s get our compiler going: <code>[npx ]elm-live src/Main.elm -- --debug --output=main.js</code>. That extra <code>--</code> is not a typo, it signals that what follows after it is an argument sent to the underlying <code>elm make</code> command and not to <code>elm-live</code>. And, as we covered briefly: We need to specify the output to allow bringing our own index file, which in turn is needed for ports (and flags). If your <code>index.html</code> is correct, and your Elm source code is unchanged, everything should behave like the previous iteration (with the notable exception of a cool title). We also turned on the time-traveling debugger with <code>--debug</code>, so you can easily inspect all messages and model updates.</p><p>(Remember to also fire up the backend with <code>node server.js</code>, that one hasn&rsquo;t changed and won&rsquo;t change in this chapter.)</p><h3 id=step-one-adding-an-outbound-port-elm---js-carrying-a-string>Step one: adding an outbound port (Elm -> JS) carrying a String
<a class=heading-link href=#step-one-adding-an-outbound-port-elm---js-carrying-a-string><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The syntax for adding an <em>outbound</em> port is quite straight forward. Let&rsquo;s start by adding the following section below our <code>-- CMD</code> one:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#78787e>-- PORTS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>{-| Outbound port, Elm -&gt; JS
</span></span></span><span style=display:flex><span><span style=color:#78787e>-}</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff5c57>copyToClipboard</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span>
</span></span></code></pre></div><p>This does exactly what the box says: it takes a single <code>String</code> parameter, and returns a <code>Cmd Msg</code>. When we use the special <code>port</code> prefix, it tells the compiler that the Elm runtime should set up this port for us (the actual implementation is abstracted).</p><p>Our compiler has some concerns, though:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>-- UNEXPECTED PORTS --------------- /path-to-your/src/Main.elm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>You are declaring ports in a normal module.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1| module Main exposing (main)
</span></span><span style=display:flex><span>   ^^^^^^
</span></span><span style=display:flex><span>Switch this to say port module instead, marking that this module contains port
</span></span><span style=display:flex><span>declarations.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Note: Ports are not a traditional FFI for calling JS functions directly. They
</span></span><span style=display:flex><span>need a different mindset! Read &lt;https://elm-lang.org/0.19.1/ports&gt; to learn the
</span></span><span style=display:flex><span>syntax and how to use it effectively.
</span></span></code></pre></div><p>Elm requires us to mark all modules using ports as such, so go ahead and do that. Your compiler should be satisfied, and we can move on to actually sending data through this port.</p><h3 id=step-two-mapping-the-copytoclipboard-msg-to-our-outbound-port>Step two: mapping the <code>CopyToClipboard</code> <code>Msg</code> to our outbound port
<a class=heading-link href=#step-two-mapping-the-copytoclipboard-msg-to-our-outbound-port><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>A tiny adjustment in our update function is all we need to hook up to our port:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span>        <span style=color:#78787e>{- ...rest of update -}</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>CopyToClipboard</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( <span style=color:#ff5c57>model</span>
</span></span><span style=display:flex><span>            , <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>phrase</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>                <span style=color:#9aedfe>Success</span> { <span style=color:#ff5c57>phrase</span> } <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff5c57>copyToClipboard</span> <span style=color:#ff5c57>phrase</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#78787e>-- `_` is a wildcard meaning</span>
</span></span><span style=display:flex><span>                <span style=color:#78787e>-- &#34;every other case:</span>
</span></span><span style=display:flex><span>                <span style=color:#ff5c57>_</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>            )
</span></span></code></pre></div><p>Before, we simply ignored the <code>CopyToClipboard</code> <code>Msg</code>, but now we send the phrase (if we have one; <code>Loading</code> and <code>Error</code> states won&rsquo;t trigger this!) through our port. You could explicitly handle the <code>Loading</code> and <code>Error</code> cases of the phrase model, but the point remains the same: we only copy phrases to clipboard, not loaders or error messages.</p><p>Our phrases are already clickable, so this should work already:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>span</span>
</span></span><span style=display:flex><span>            <span style=color:#78787e>-- this was already in place:</span>
</span></span><span style=display:flex><span>            [ <span style=color:#9aedfe>Events</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>CopyToClipboard</span>
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>viewPhrase</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>phrase</span> ]
</span></span><span style=display:flex><span>        <span style=color:#78787e>{- rest of view -}</span>
</span></span></code></pre></div><p>Feel free to add some extra styling (cursor: pointer?) and the works according to your liking, but our phrases should now 1) Trigger <code>CopyToClipboard</code> that will 2) be handled in <code>update</code> and mapped to the outbound <code>copyToClipboard</code> port that is 3) transformed into an Elm runtime command that sends the accompanying <code>String</code> to the outside JavaScript world. That&rsquo;s all there is to sending a message. Now let&rsquo;s try to receive it!</p><h3 id=step-three-receiving-messages-in-javascript-land>Step three: receiving messages in JavaScript land
<a class=heading-link href=#step-three-receiving-messages-in-javascript-land><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>This is when we get to the part where a custom <code>index.html</code> is necessary. Let&rsquo;s cut to the chase and see how to subscribe to Elm messages in JavaScript:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#78787e>// inside &lt;script /&gt; in index.html
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>const</span> app <span style=color:#ff6ac1>=</span> Elm.Main.init({
</span></span><span style=display:flex><span>  node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// Every `port {name} {Type} Cmd Msg` in Elm gets a
</span></span></span><span style=display:flex><span><span style=color:#78787e>// matching `app.ports[{name}]` with a `subscribe` method:
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>app.ports.copyToClipboard.subscribe((text) =&gt;
</span></span><span style=display:flex><span>  console.log(<span style=color:#5af78e>`Text to copy: </span><span style=color:#5af78e>${</span>text<span style=color:#5af78e>}</span><span style=color:#5af78e>`</span>),
</span></span><span style=display:flex><span>  <span style=color:#78787e>/* TODO: Implement clipboard copy */</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>If you refresh your browser (<code>elm-live</code> doesn&rsquo;t detect <code>index.html</code> changes), you should get a console log whenever you click on a phrase (and not if you click while it&rsquo;s loading or when there&rsquo;s an error).</p><p>Great success!</p><p>As for the actual implementation: Depending on which day of the week you read this, a simple <code>navigator.clipboard.writeText()</code> may or may not suffice on modern browsers. Since we&rsquo;re on the wild side of the Elm / JavaScript boundary by now, there are probably 10 different npm packages providing that functionality, with more than half of them containing major security holes that might make your computer explode.</p><p><img src=/images/clipboard_npm.png alt="clipboard npm packages"></p><p>For a &ldquo;good enough for this app&rdquo;-solution without any npm dependencies, check out <a href=https://github.com/cekrem/elm-primer-code-examples/blob/main/08_lgtm-generator_05-ports/index.html class=external-link target=_blank rel=noopener><code>index.html</code> from the example repository</a>.</p><h3 id=step-four-sending-messages-from-javascript-to-elm>Step four: sending messages from JavaScript to Elm
<a class=heading-link href=#step-four-sending-messages-from-javascript-to-elm><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Though not strictly needed, we could send a message back to our app to signal that the copy to clipboard action succeeded or failed. If nothing else, it&rsquo;s a simple way to show how things work when messages go the other direction.</p><p>First, let&rsquo;s add an <em>inbound</em> port to our Elm code. The syntax is different from outbound portsâ€”instead of returning a <code>Cmd</code>, inbound ports return a <code>Sub</code> (subscription):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#78787e>-- PORTS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>{-| Outbound port, Elm -&gt; JS -}</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff5c57>copyToClipboard</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>{-| Inbound port, JS -&gt; Elm -}</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>port</span> <span style=color:#ff5c57>clipboardResult</span> <span style=color:#57c7ff>:</span> (<span style=color:#9aedfe>Bool</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Msg</span>) <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Sub</span> <span style=color:#9aedfe>Msg</span>
</span></span></code></pre></div><p>The type signature <code>(Bool -> Msg) -> Sub Msg</code> looks a bit strange at first. What it means is: &ldquo;JavaScript will send us a <code>Bool</code>, and we&rsquo;ll need to turn that into a message.&rdquo; The Elm runtime handles the plumbing, by turning it into a <code>Sub</code> (subscription).</p><p>Now we need to subscribe to this port. Remember subscriptions? We&rsquo;ve been ignoring them with <code>subscriptions = \_ -> Sub.none</code>, but now we have a reason to use them:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>subscriptions</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Sub</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>subscriptions</span> <span style=color:#ff5c57>_</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>clipboardResult</span> <span style=color:#9aedfe>ClipboardCopied</span>
</span></span></code></pre></div><p>This tells Elm: &ldquo;When JavaScript sends a <code>Bool</code> through <code>clipboardResult</code>, wrap it in a <code>ClipboardCopied</code> message and send it through our update function.&rdquo;</p><p>Let&rsquo;s add that message to our <code>Msg</code> type:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>GenerateClicked</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>PhraseReceived</span> (<span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Error</span> <span style=color:#9aedfe>String</span>)
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>CopyToClipboard</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>ClipboardCopied</span> <span style=color:#9aedfe>Bool</span>  <span style=color:#78787e>-- new!</span>
</span></span></code></pre></div><p>And handle it in our update function:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#78787e>{- ...existing cases... -}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>ClipboardCopied</span> <span style=color:#ff5c57>success</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>if</span> <span style=color:#ff5c57>success</span> <span style=color:#ff6ac1>then</span>
</span></span><span style=display:flex><span>                ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>clipboardStatus</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Just</span> <span style=color:#5af78e>&#34;Copied!&#34;</span> }
</span></span><span style=display:flex><span>                , <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>else</span>
</span></span><span style=display:flex><span>                ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>clipboardStatus</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Just</span> <span style=color:#5af78e>&#34;Copy failed&#34;</span> }
</span></span><span style=display:flex><span>                , <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>                )
</span></span></code></pre></div><p>Waitâ€”we need a place to store this status. Let&rsquo;s add it to our model:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    { <span style=color:#ff5c57>phrase</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>RemoteData</span> <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Error</span> <span style=color:#9aedfe>Phrase</span>
</span></span><span style=display:flex><span>    , <span style=color:#ff5c57>clipboardStatus</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Maybe</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#57c7ff>:</span> () <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>init</span> <span style=color:#ff5c57>_</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    ( { <span style=color:#ff5c57>phrase</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>NotAsked</span>
</span></span><span style=display:flex><span>      , <span style=color:#ff5c57>clipboardStatus</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Nothing</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    , <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span>
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><p>And display it in our view (add this somewhere sensible, maybe below the phrase):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>view</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>div</span> []
</span></span><span style=display:flex><span>        [ <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>span</span>
</span></span><span style=display:flex><span>            [ <span style=color:#9aedfe>Events</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>CopyToClipboard</span> ]
</span></span><span style=display:flex><span>            [ <span style=color:#ff5c57>viewPhrase</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>phrase</span> ]
</span></span><span style=display:flex><span>        , <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>button</span>
</span></span><span style=display:flex><span>            [ <span style=color:#9aedfe>Events</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>onClick</span> <span style=color:#9aedfe>GenerateClicked</span> ]
</span></span><span style=display:flex><span>            [ <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;Generate&#34;</span> ]
</span></span><span style=display:flex><span>        , <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>clipboardStatus</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>            <span style=color:#9aedfe>Just</span> <span style=color:#ff5c57>status</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>div</span> [] [ <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>text</span> <span style=color:#ff5c57>status</span> ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#9aedfe>Nothing</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>text</span> <span style=color:#5af78e>&#34;&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span></code></pre></div><p>Now for the JavaScript side. We need to send messages <em>to</em> Elm. Instead of subscribing to a port, we use <code>send</code>:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff6ac1>const</span> app <span style=color:#ff6ac1>=</span> Elm.Main.init({
</span></span><span style=display:flex><span>  node<span style=color:#ff6ac1>:</span> <span style=color:#ff5c57>document</span>.getElementById(<span style=color:#5af78e>&#34;app&#34;</span>),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.ports.copyToClipboard.subscribe((text) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#78787e>/* Insert copy-to-clipboard implementation */</span>
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Send success back to Elm
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    app.ports.clipboardResult.send(<span style=color:#ff6ac1>true</span>);
</span></span><span style=display:flex><span>  } <span style=color:#ff6ac1>catch</span> (error) {
</span></span><span style=display:flex><span>    console.error(<span style=color:#5af78e>&#34;Failed to copy:&#34;</span>, error);
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Send failure back to Elm
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    app.ports.clipboardResult.send(<span style=color:#ff6ac1>false</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>That&rsquo;s it. Click a phrase, and you should see &ldquo;Copied!&rdquo; appear. The flow is:</p><ol><li>User clicks phrase â†’ <code>CopyToClipboard</code> message</li><li>Elm sends phrase through <code>copyToClipboard</code> port</li><li>JavaScript receives it, copies to clipboard</li><li>JavaScript sends result through <code>clipboardResult.send(true)</code></li><li>Elm receives it as <code>ClipboardCopied True</code></li><li>Update function stores &ldquo;Copied!&rdquo; in model</li><li>View displays the status</li></ol><p>One thing you might notice: the &ldquo;Copied!&rdquo; message stays there forever. In a real app, you&rsquo;d probably want to clear it after a few seconds. You could do this with a <code>Cmd</code> that sends a <code>ClearClipboardStatus</code> message after a delay, but that requires understanding <code>Process.sleep</code> and <code>Task.perform</code>, which we haven&rsquo;t covered yet. For now, let&rsquo;s keep it simple and just clear the status when the user generates a new phrase:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>GenerateClicked</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span>
</span></span><span style=display:flex><span>                <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>phrase</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Loading</span>
</span></span><span style=display:flex><span>                , <span style=color:#ff5c57>clipboardStatus</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Nothing</span>  <span style=color:#78787e>-- clear status</span>
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            , <span style=color:#ff5c57>generatePhrase</span>
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#78787e>{- ...rest of update... -}</span>
</span></span></code></pre></div><p>There you have it: two-way communication between Elm and JavaScript. Elm stays in control of its data flow, JavaScript handles the messy browser API, and the boundary between them is explicit and type-safe.</p><h2 id=what-you-just-learned>What You Just Learned
<a class=heading-link href=#what-you-just-learned><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>This chapter covered Elm&rsquo;s approach to JavaScript interopâ€”treating it as useful but untrusted infrastructure. Here&rsquo;s what you now know:</p><p><strong>Flags</strong> are your program&rsquo;s initialization data:</p><ul><li>Pass configuration, tokens, or feature flags at startup</li><li>Validated against your <code>Flags</code> type aliasâ€”wrong shape means app won&rsquo;t start</li><li>Use <code>Maybe</code> for optional flags with sensible defaults</li><li>Think of them like command-line arguments: some apps need them, others work fine without</li></ul><p><strong>Ports</strong> enable two-way communication with JavaScript:</p><ul><li><strong>Outbound</strong> (<code>String -> Cmd Msg</code>): Elm sends data out to JavaScript</li><li><strong>Inbound</strong> (<code>(Bool -> msg) -> Sub Msg</code>): JavaScript sends data back to Elm</li><li>Mark any module using ports with <code>port module</code> to make boundaries explicit</li><li>Subscribe to ports in JavaScript using <code>app.ports.portName.subscribe()</code></li></ul><p><strong>Manual bootstrapping</strong> gives you control:</p><ul><li>Compile to JavaScript with <code>elm make src/Main.elm --output=main.js</code></li><li>Create your own <code>index.html</code> and initialize with <code>Elm.Main.init()</code></li><li>Pass flags during initialization, set up port subscriptions afterward</li></ul><p>The key insight: Elm treats JavaScript like any external system in Clean Architectureâ€”useful for infrastructure concerns (clipboard, localStorage, analytics), but kept at arm&rsquo;s length from your core logic. Your Elm code stays pure, predictable, and safe. The JavaScript world can throw exceptions and misbehave all it wants; your ports are the controlled boundary.</p><p>For React developers, this might feel like extra ceremony compared to just importing an npm package. But that ceremony is precisely what keeps your app reliable. You&rsquo;re not avoiding JavaScriptâ€”you&rsquo;re just being intentional about where the boundaries are.</p><p>With flags and ports in your toolkit, you have everything you need to build real applications. The remaining chapters focus on patterns, scale, and experienceâ€”not new fundamental concepts.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>In <a href=https://elm.town/episodes/b06499a6 class=external-link target=_blank rel=noopener>Elm Town 13: History of Ports</a> Evan Czaplicki addresses this, and he says the following: &ldquo;It&rsquo;s rooted in ideas of concurrency and client/server relationships. If you want to isolate code a way to do it is to create a communication channel so that you can run code that has certain rules and regulations and if all I send is data then I could send it to anyone who can do anything they want with different rules and they can send it back.&rdquo;&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post onsubmit=onSubscribe()><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>Â© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=ðŸº data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script><script>!function(e,t){var n,s,o,i;t.__SV||window.posthog&&window.posthog.__loaded||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(n=e.createElement("script")).type="text/javascript",n.crossOrigin="anonymous",n.async=!0,n.src=r.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var l=t;for(0[0]!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),s=0;s<o.length;s++)d(l,o[s]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_AHy7NSMntJJLr0hUSCwdUS1eRq6SaEqacK1Mzzf36ED",{api_host:"https://eu.i.posthog.com",defaults:"2025-05-24",person_profiles:"identified_only"});function onSubscribe(){posthog.capture("new subscriber")}</script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>