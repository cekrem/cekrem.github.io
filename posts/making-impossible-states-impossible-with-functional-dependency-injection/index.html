<!doctype html><html lang=en><head><title>Making Impossible States Impossible: Type-Safe Domain Modeling with Functional Dependency Injection Â· cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="Learn how to use rich types, phantom types, and partial application to eliminate impossible states and implement Clean Architecture's dependency inversion in a functional way. Discover why the compiler is your best friend for building robust domain models."><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/banner.jpg"><meta name=twitter:title content="Making Impossible States Impossible: Type-Safe Domain Modeling with Functional Dependency Injection"><meta name=twitter:description content="Learn how to use rich types, phantom types, and partial application to eliminate impossible states and implement Clean Architecture's dependency inversion in a functional way. Discover why the compiler is your best friend for building robust domain models."><meta property="og:url" content="https://cekrem.github.io/posts/making-impossible-states-impossible-with-functional-dependency-injection/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="Making Impossible States Impossible: Type-Safe Domain Modeling with Functional Dependency Injection"><meta property="og:description" content="Learn how to use rich types, phantom types, and partial application to eliminate impossible states and implement Clean Architecture's dependency inversion in a functional way. Discover why the compiler is your best friend for building robust domain models."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-18T00:00:00+00:00"><meta property="article:tag" content="Functional-Programming"><meta property="article:tag" content="Clean Architecture"><meta property="article:tag" content="Types"><meta property="article:tag" content="Elm"><meta property="article:tag" content="Fsharp"><meta property="article:tag" content="Domain-Modeling"><meta property="og:image" content="https://cekrem.github.io/images/banner.jpg"><link rel=canonical href=https://cekrem.github.io/posts/making-impossible-states-impossible-with-functional-dependency-injection/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.e8eb08b92eec0f2a19c8cbe4eda1f38c703416996d08f55900541ba798921e5b.css integrity="sha256-6OsIuS7sDyoZyMvk7aHzjHA0FpltCPVZAFQbp5iSHls=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a93347c2833a476d1c25ae74bed3f80024fc1eaf1a33d084c2211065513e5c42.css integrity="sha256-qTNHwoM6R20cJa50vtP4ACT8Hq8aM9CEwiEQZVE+XEI=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/how-i-met-jesus/>Jesus!?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (ðŸ‡³ðŸ‡´)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/making-impossible-states-impossible-with-functional-dependency-injection/>Making Impossible States Impossible: Type-Safe Domain Modeling with Functional Dependency Injection</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-08-18T00:00:00Z>August 18, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
10-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/functional-programming/>Functional-Programming</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/clean-architecture/>Clean Architecture</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/types/>Types</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/fsharp/>Fsharp</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/domain-modeling/>Domain-Modeling</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/dependency-inversion/>Dependency-Inversion</a></span></div></div></header><div class=post-content><p>Most applications don&rsquo;t fail because algorithms are hardâ€”they fail because our models allow states that make no sense in the domain. &ldquo;User without email but verified&rdquo;, &ldquo;order that&rsquo;s both shipped and cancelled&rdquo;, &ldquo;sum &lt; 0&rdquo;, &ldquo;modal dialog both closed and active&rdquo;. These states should be impossible from the start.</p><blockquote><p>Among the most time-consuming bugs to track down are the ones where we look at our application state and say &ldquo;this shouldn&rsquo;t be possible.&rdquo;</p><ul><li>Richard Feldman, elm-conf 2016</li></ul></blockquote><p>This is where typed functional languages (Elm, Haskell, F#, etc.) truly shine. They give us tools to express domain rules directly in the type system itself. The result? The compiler refuses to build when we try to represent an illegal state. In short: <strong>make impossible states impossible</strong>.</p><p>If &ldquo;no runtime exceptions&rdquo; sounds appealing, then &ldquo;no impossible state at runtime&rdquo; must be even better! ðŸ¥³</p><h2 id=rich-types-as-living-documentation>Rich Types as Living Documentation
<a class=heading-link href=#rich-types-as-living-documentation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>An important observation from Scott Wlaschin&rsquo;s &ldquo;Domain Modeling Made Functional&rdquo; is that good domain types should be so clear that domain experts (without programming background) can read them and recognize familiar concepts and rules. In other words: well-chosen, rich types function as living documentationâ€”and the compiler enforces them.</p><p>This is simultaneously one of the strongest arguments for typed functional languages: they make it natural to express the domain precisely, get fast feedback during compilation, and collaborate more closely with domain experts about the right concepts.</p><h2 id=parse-dont-validate>Parse, Don&rsquo;t Validate
<a class=heading-link href=#parse-dont-validate><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Instead of &ldquo;validating&rdquo; data scattered throughout the code, we do one thing before bringing data into the domain layer: we parse raw data into rich, type-safe domain values. From there, the rest of the system works with values that are already guaranteed to be valid. This principle is excellently explained in Alexis King&rsquo;s (Lexi Lambda) <a href=https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/ class=external-link target=_blank rel=noopener>&ldquo;Parse, don&rsquo;t validate&rdquo;</a>.</p><p>Example in Elmâ€”a non-empty string and an email:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>module </span><span style=color:#f3f99d>Domain</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#9aedfe>NonEmptyString</span>, <span style=color:#9aedfe>Email</span>, <span style=color:#ff5c57>nonEmpty</span>, <span style=color:#ff5c57>email</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>NonEmptyString</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>NonEmptyString</span> <span style=color:#9aedfe>String</span> <span style=color:#78787e>-- note: constructor not exposed</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>nonEmpty</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> <span style=color:#9aedfe>NonEmptyString</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>nonEmpty</span> <span style=color:#ff5c57>s</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>if</span> <span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>length</span> <span style=color:#ff5c57>s</span> <span style=color:#57c7ff>&gt;</span> <span style=color:#ff9f43>0</span> <span style=color:#ff6ac1>then</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Ok</span> (<span style=color:#9aedfe>NonEmptyString</span> <span style=color:#ff5c57>s</span>)
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>else</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Err</span> <span style=color:#5af78e>&#34;Cannot be empty&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Email</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Email</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>email</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>String</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> <span style=color:#9aedfe>Email</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>email</span> <span style=color:#ff5c57>s</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>if</span> <span style=color:#9aedfe>String</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>contains</span> <span style=color:#5af78e>&#34;@&#34;</span> <span style=color:#ff5c57>s</span> <span style=color:#ff6ac1>then</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Ok</span> (<span style=color:#9aedfe>Email</span> <span style=color:#ff5c57>s</span>)
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>else</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>Err</span> <span style=color:#5af78e>&#34;Invalid email&#34;</span>
</span></span></code></pre></div><p>The point: After parsing, there are no &ldquo;empty strings&rdquo; or &ldquo;invalid emails&rdquo; in the domain. They can only exist as errors in boundary code, not in the rest of the system. And since values are immutable, they also can&rsquo;t be &ldquo;corrupted&rdquo; accidentally later in the program flow.</p><h2 id=sum-types-single-source-of-truth-for-state>Sum Types: Single Source of Truth for State
<a class=heading-link href=#sum-types-single-source-of-truth-for-state><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Instead of scattered booleans, represent possible state with an explicit union/sum type. This is the core of &ldquo;Making impossible states impossible&rdquo;:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Session</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Anonymous</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Authenticated</span> <span style=color:#9aedfe>User</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- Impossible to have a &#34;partially logged in&#34; user</span>
</span></span></code></pre></div><p>Another example is asynchronous loading (avoid <code>isLoading</code>, <code>error</code>, <code>data</code> that can contradict each other):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>RemoteData</span> <span style=color:#ff5c57>error</span> <span style=color:#ff5c57>value</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>NotAsked</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Loading</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Success</span> <span style=color:#ff5c57>value</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>Failure</span> <span style=color:#ff5c57>error</span>
</span></span></code></pre></div><p>Here each state is mutually exclusive and completeâ€”UI logic becomes both simpler and safer.</p><h2 id=functional-dependency-injection-partial-application-as-architecture>Functional Dependency Injection: Partial Application as Architecture
<a class=heading-link href=#functional-dependency-injection-partial-application-as-architecture><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Now that the domain&rsquo;s state space is constrained by types, we still need to wire in effects without reintroducing illegal states. This is where partial application shines: we keep the core pure and push effects to the edges by injecting them as functions.</p><p>Here&rsquo;s where Clean Architecture&rsquo;s Dependency Inversion Principle meets functional programming in a beautiful way. Instead of injecting heavy interfaces and objects, we can inject <strong>functions</strong> as dependencies. As Scott Wlaschin demonstrates in &ldquo;Domain Modeling Made Functional&rdquo;, partial application becomes the functional equivalent of dependency injection.</p><p>Consider this workflow step from the book (F#!):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#f3f99d>ValidateOrder</span> <span style=color:#ff6ac1>=</span>
</span></span><span style=display:flex><span>    CheckProductCodeExists    <span style=color:#78787e>// dependency
</span></span></span><span style=display:flex><span>    <span style=color:#ff6ac1>-&gt;</span> CheckAddressExists     <span style=color:#78787e>// dependency
</span></span></span><span style=display:flex><span>    <span style=color:#ff6ac1>-&gt;</span> UnvalidatedOrder       <span style=color:#78787e>// input
</span></span></span><span style=display:flex><span>    <span style=color:#ff6ac1>-&gt;</span> Result<span style=color:#ff6ac1>&lt;</span>ValidatedOrder<span style=color:#ff6ac1>,</span> ValidationError<span style=color:#ff6ac1>&gt;</span> <span style=color:#78787e>// output
</span></span></span></code></pre></div><p>The key insight: dependencies come first in the parameter order, followed by input, then output. This allows us to use partial application to &ldquo;inject&rdquo; our dependencies:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#78787e>// &#34;Inject&#34; dependencies via partial application
</span></span></span><span style=display:flex><span><span style=color:#ff6ac1>let</span> <span style=color:#ff5c57>validateOrderStep</span> <span style=color:#ff6ac1>=</span>
</span></span><span style=display:flex><span>    validateOrder
</span></span><span style=display:flex><span>        checkProductCodeExists  <span style=color:#78787e>// injected dependency
</span></span></span><span style=display:flex><span>        checkAddressExists      <span style=color:#78787e>// injected dependency
</span></span></span><span style=display:flex><span>    <span style=color:#78787e>// Returns: UnvalidatedOrder -&gt; Result&lt;ValidatedOrder, ValidationError&gt;
</span></span></span></code></pre></div><p>In Elm, we&rsquo;d do ish this:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#78787e>-- Inject dependencies first, then input</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>CheckProductCodeExists</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>ProductCode</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> ()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>CheckAddressExists</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Address</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> ()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#ff6ac1>alias</span> <span style=color:#9aedfe>ValidateOrder</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>CheckProductCodeExists</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>CheckAddressExists</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>UnvalidatedOrder</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> <span style=color:#9aedfe>ValidatedOrder</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>validateOrder</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>ValidateOrder</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>validateOrder</span> <span style=color:#ff5c57>checkProduct</span> <span style=color:#ff5c57>checkAddress</span> <span style=color:#ff5c57>unvalidated</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Debug</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>todo</span> <span style=color:#5af78e>&#34;implement&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- &#34;Inject&#34; concrete dependencies via partial application (currying)</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>validateOrderStep</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>UnvalidatedOrder</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>String</span> <span style=color:#9aedfe>ValidatedOrder</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>validateOrderStep</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>validateOrder</span> <span style=color:#ff5c57>checkProductCodeExists</span> <span style=color:#ff5c57>checkAddressExists</span>
</span></span></code></pre></div><p>This is <strong>dependency inversion without interfaces</strong>! We&rsquo;ve inverted the dependency (the function depends on abstractions, not concretions), and we can easily substitute different implementations for testing or different environments.</p><h3 id=why-this-respects-clean-architecture>Why This Respects Clean Architecture
<a class=heading-link href=#why-this-respects-clean-architecture><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>This approach aligns with dependency inversion in a minimal, practical way:</p><ul><li><strong>High-level policy stays pure and unaware of infrastructure</strong> (e.g., <code>ValidateOrder</code> knows nothing about a database)</li><li><strong>Both sides depend on function types, not concretes</strong> (e.g., <code>CheckProductCodeExists</code>)</li><li><strong>Abstractions remain stable while implementations vary</strong> (swap different impls for prod/tests)</li></ul><p>Unlike traditional OOP DI, we avoid IoC containers, interfaces, and lifecycle management. The type system and partial application do the heavy lifting.</p><h2 id=phantom-types-compile-time-filtering>Phantom Types: Compile-Time Filtering
<a class=heading-link href=#phantom-types-compile-time-filtering><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Phantom types let us &ldquo;color&rdquo; values without runtime cost. They&rsquo;re used to separate elements that shouldn&rsquo;t be mixed. Here&rsquo;s an elegant example where &ldquo;green cars&rdquo; and &ldquo;polluting cars&rdquo; are distinguished using a type parameter:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Car</span> <span style=color:#ff5c57>fuel</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>ElectricCar</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>HydrogenCar</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>DieselCar</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Green</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Green</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Polluting</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Polluting</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>electricCar</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Car</span> <span style=color:#ff5c57>fuel</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>electricCar</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>ElectricCar</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>dieselCar</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Car</span> <span style=color:#9aedfe>Polluting</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>dieselCar</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>DieselCar</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>createGreenCarFactory</span> <span style=color:#57c7ff>:</span> (<span style=color:#ff5c57>data</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>List</span> (<span style=color:#9aedfe>Car</span> <span style=color:#9aedfe>Green</span>)) <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Factory</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>createGreenCarFactory</span> <span style=color:#ff5c57>build</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#78787e>-- implementation irrelevant; signature forbids diesel</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Debug</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>todo</span> <span style=color:#5af78e>&#34;...&#34;</span>
</span></span></code></pre></div><p>The key is that <code>electricCar</code> is polymorphic (<code>Car fuel</code>) and can therefore behave as &ldquo;green&rdquo; when required, while <code>dieselCar</code> is locked to <code>Polluting</code> and rejected by the compiler where &ldquo;green&rdquo; is expected.</p><h3 id=process-flow-as-state-machine-with-phantom-types>Process Flow as State Machine with Phantom Types
<a class=heading-link href=#process-flow-as-state-machine-with-phantom-types><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Phantom types also work well for modeling process flows where order must be correct, without creating a maze of intermediate types:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Step</span> <span style=color:#ff5c57>step</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Order</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Start</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Start</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>WithTotal</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>WithTotal</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>WithQuantity</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>WithQuantity</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Done</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>start</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Order</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Start</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>setTotal</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Start</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>WithTotal</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>adjustQuantityFromTotal</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>WithTotal</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Done</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>setQuantity</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Start</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>WithQuantity</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>adjustTotalFromQuantity</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>WithQuantity</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>done</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Step</span> <span style=color:#9aedfe>Done</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Order</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- Two legal flows</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>flowPrioritizingTotal</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Order</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Order</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>flowPrioritizingTotal</span> <span style=color:#ff5c57>total</span> <span style=color:#ff5c57>order</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>start</span> <span style=color:#ff5c57>order</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>setTotal</span> <span style=color:#ff5c57>total</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>adjustQuantityFromTotal</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>flowPrioritizingQuantity</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Int</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Order</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Order</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>flowPrioritizingQuantity</span> <span style=color:#ff5c57>quantity</span> <span style=color:#ff5c57>order</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>start</span> <span style=color:#ff5c57>order</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>setQuantity</span> <span style=color:#ff5c57>quantity</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>adjustTotalFromQuantity</span>
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#ff5c57>done</span>
</span></span></code></pre></div><p>The signatures prevent us from skipping steps or mixing order. This gives the advantage of a state machineâ€”with compiler checkingâ€”without explosion of separate intermediate types.</p><h2 id=another-example-using-phantom-builders-with-extensible-records>Another example using Phantom Builders with Extensible Records
<a class=heading-link href=#another-example-using-phantom-builders-with-extensible-records><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Builders can also be type-secured so that necessary steps must be taken in the right orderâ€”before a &ldquo;finished&rdquo; object can be producedâ€“using &ldquo;extensible records&rdquo; (<code>{ a | whateverTraitOrPropNeededOrGiven : () }</code>). A big thanks to one of my Elm heroes Jeroen Engels for <a href="https://www.youtube.com/watch?v=Trp3tmpMb-o" class=external-link target=_blank rel=noopener>introducing this pattern in a very clear way in this video</a>.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff6ac1>module </span><span style=color:#f3f99d>Button</span> <span style=color:#ff5c57>exposing</span> (<span style=color:#9aedfe>Button</span>, <span style=color:#ff5c57>new</span>, <span style=color:#ff5c57>withDisabled</span>, <span style=color:#ff5c57>withOnClick</span>, <span style=color:#ff5c57>withText</span>, <span style=color:#ff5c57>withIcon</span>, <span style=color:#ff5c57>toHtml</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>constraints</span> <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Button</span> (<span style=color:#9aedfe>List</span> (<span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Attribute</span> <span style=color:#ff5c57>msg</span>)) (<span style=color:#9aedfe>List</span> (<span style=color:#9aedfe>Html</span> <span style=color:#ff5c57>msg</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>-- Start state: we MUST choose an interaction (onClick OR disabled)</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>new</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>needsInteractivity</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>new</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> [] []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withDisabled</span> <span style=color:#57c7ff>:</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>needsInteractivity</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>hasInteractivity</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withDisabled</span> (<span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>attrs</span> <span style=color:#ff5c57>children</span>) <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> (<span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Attributes</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>disabled</span> <span style=color:#9aedfe>True</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>attrs</span>) <span style=color:#ff5c57>children</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withOnClick</span> <span style=color:#57c7ff>:</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>needsInteractivity</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>hasInteractivity</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withOnClick</span> <span style=color:#ff5c57>message</span> (<span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>attrs</span> <span style=color:#ff5c57>children</span>) <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> (<span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Events</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>onClick</span> <span style=color:#ff5c57>message</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>attrs</span>) <span style=color:#ff5c57>children</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withText</span> <span style=color:#57c7ff>:</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>c</span> <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>hasTextOrIcon</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>withText</span> <span style=color:#ff5c57>str</span> (<span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>attrs</span> <span style=color:#ff5c57>children</span>) <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>attrs</span> (<span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>text</span> <span style=color:#ff5c57>str</span> <span style=color:#57c7ff>::</span> <span style=color:#ff5c57>children</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>toHtml</span> <span style=color:#57c7ff>:</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Button</span> { <span style=color:#ff5c57>c</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>hasInteractivity</span> <span style=color:#57c7ff>:</span> (), <span style=color:#ff5c57>hasTextOrIcon</span> <span style=color:#57c7ff>:</span> () } <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Html</span> <span style=color:#ff5c57>msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>toHtml</span> (<span style=color:#9aedfe>Button</span> <span style=color:#ff5c57>attrs</span> <span style=color:#ff5c57>children</span>) <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Html</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>button</span> (<span style=color:#9aedfe>List</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>reverse</span> <span style=color:#ff5c57>attrs</span>) (<span style=color:#9aedfe>List</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>reverse</span> <span style=color:#ff5c57>children</span>)
</span></span></code></pre></div><p>Simply put, this ensures that a button <em>either</em> has an onclick <em>or</em> is disabled before allowing it to build. No runtime validation, just extensible record with &ldquo;traits&rdquo; or props that indicate their process state. The signatures do the work: <code>toHtml</code> cannot be called until we&rsquo;ve satisfied both requirements. We can choose order freely, and we can add more &ldquo;markings&rdquo; later without changing existing users.</p><h2 id=practical-checklist-for-impossible-states>Practical Checklist for &ldquo;Impossible States&rdquo;
<a class=heading-link href=#practical-checklist-for-impossible-states><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>Define sum types for states that would otherwise be booleans that can be combined incorrectly</li><li>Create rich domain values (newtypes/aliases) for &ldquo;important strings&rdquo; like Email, UUID, NonEmpty, NonNegative, etc.<ul><li>Use &ldquo;smart constructors&rdquo; internally and don&rsquo;t expose type constructors</li></ul></li><li>Parse at boundaries (IO/HTTP/DB)â€”give the rest of the system safe types</li><li>Use phantom types to distinguish subgroups that shouldn&rsquo;t be mixed</li><li>Think building sequences as types (phantom builder) when order matters</li><li>Apply partial application for functional dependency injection</li></ul><h2 id=testing-and-compiler-assistance>Testing and Compiler Assistance
<a class=heading-link href=#testing-and-compiler-assistance><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>With strong types and rich domain models, the compiler takes much of the burden of ensuring illegal states cannot exist. This reduces the need for manual tests, since many errors are already caught at compile time.</p><p>Testing is still important for ensuring logic behaves as expected, but the compiler helps us eliminate a large class of errors that would otherwise be difficult to find and fix. Instead of testing that &ldquo;user cannot be both logged in and logged out,&rdquo; the type system guarantees this state simply cannot exist.</p><h2 id=when-is-this-worth-it>When Is This Worth It?
<a class=heading-link href=#when-is-this-worth-it><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>This is especially valuable in systems where robustness, predictability, and maintainability are important. When the consequences of error states are significantâ€”whether for users, business, or securityâ€”it pays to model the domain so that illegal states become impossible at compile time.</p><p>As they say about writing tests: just do it where you don&rsquo;t want the application to fail&mldr;</p><h2 id=functional-architecture-in-practice>Functional Architecture in Practice
<a class=heading-link href=#functional-architecture-in-practice><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The combination of rich types and functional dependency injection gives us a powerful architecture pattern:</p><ol><li><strong>Domain layer</strong>: Pure functions with rich types, dependencies as function parameters</li><li><strong>Application layer</strong>: Compose domain functions using partial application to inject dependencies</li><li><strong>Infrastructure layer</strong>: Implement the actual dependency functions (database access, external APIs, etc.)</li></ol><p>This creates a clean separation where the domain layer has no knowledge of infrastructure concerns, yet we avoid the complexity of traditional dependency injection frameworks.</p><h2 id=conclusion>Conclusion
<a class=heading-link href=#conclusion><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Typed functional languages make it both possible and natural to move validation from runtime to compile time. With sum types, rich domain values, phantom types, and functional dependency injection, we can achieve models that simply don&rsquo;t let us represent illegal states.</p><p>This approach gives us simpler code, safer refactoring, and fewer production errors. As system complexity continues to grow and robustness becomes increasingly critical, techniques for making impossible states impossible become more relevant than ever.</p><p>The compiler becomes our most trusted teammateâ€”one that never gets tired, never misses edge cases, and works 24/7 to ensure our domain models stay consistent and correct.</p><h2 id=references>References
<a class=heading-link href=#references><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/ class=external-link target=_blank rel=noopener>Parse, don&rsquo;t validate â€“ Alexis King @ Lexi Lambda</a></li><li><a href=https://jfmengels.net/single-out-elements-using-phantom-types class=external-link target=_blank rel=noopener>Single out elements using phantom types â€“ Jeroen Engels</a></li><li><a href="https://www.youtube.com/watch?v=IcgmSRJHu_8" class=external-link target=_blank rel=noopener>Making impossible states impossible (video)</a></li><li><a href="https://www.youtube.com/watch?v=Trp3tmpMb-o&amp;t=377s" class=external-link target=_blank rel=noopener>Phantom Builder Pattern (video)</a></li><li><a href=https://amzn.to/4loKAlq class=external-link target=_blank rel=noopener>Domain Modeling Made Functional â€“ Scott Wlaschin</a></li><li><a href=https://sporto.github.io/elm-patterns/advanced/flow-phantom-types.html class=external-link target=_blank rel=noopener>Elm Patterns â€“ Process flow using phantom types</a></li><li><a href=https://elm-radio.com/episode/phantom-builder/ class=external-link target=_blank rel=noopener>Elm Radio: Phantom Builders (podcast episode)</a></li></ul></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post onsubmit=onSubscribe()><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>Â© 2021 - 2026 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=ðŸº data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script><script>!function(e,t){var n,s,o,i;t.__SV||window.posthog&&window.posthog.__loaded||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(n=e.createElement("script")).type="text/javascript",n.crossOrigin="anonymous",n.async=!0,n.src=r.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var l=t;for(0[0]!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),s=0;s<o.length;s++)d(l,o[s]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_AHy7NSMntJJLr0hUSCwdUS1eRq6SaEqacK1Mzzf36ED",{api_host:"https://eu.i.posthog.com",defaults:"2025-05-24",person_profiles:"identified_only"});function onSubscribe(){posthog.capture("new subscriber")}</script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>