<!doctype html><html lang=en><head><title>The Discipline of Constraints: What Elm Taught Me About React's useReducer · cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="How enforced discipline in one language can teach you better patterns in another - lessons from crossing the Elm/React boundary"><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/featured-with-margins.png"><meta name=twitter:title content="The Discipline of Constraints: What Elm Taught Me About React's useReducer"><meta name=twitter:description content="How enforced discipline in one language can teach you better patterns in another - lessons from crossing the Elm/React boundary"><meta property="og:url" content="https://cekrem.github.io/posts/the-discipline-of-constraints-elm-usereducer-lessons/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="The Discipline of Constraints: What Elm Taught Me About React's useReducer"><meta property="og:description" content="How enforced discipline in one language can teach you better patterns in another - lessons from crossing the Elm/React boundary"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-09-18T00:00:00+00:00"><meta property="article:tag" content="Elm"><meta property="article:tag" content="React"><meta property="article:tag" content="Usereducer"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Functional Programming"><meta property="og:image" content="https://cekrem.github.io/images/featured-with-margins.png"><link rel=canonical href=https://cekrem.github.io/posts/the-discipline-of-constraints-elm-usereducer-lessons/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.f63b17f16aa5dbf557dd08e6806b0b477d5e6d8f2af64807e14512a12dd2ccaa.css integrity="sha256-9jsX8Wql2/VX3QjmgGsLR31ebY8q9kgH4UUSoS3SzKo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.be284be20943b01514c49cbe3832fe8cc215513c0e5962b1d349102cf16f2c25.css integrity="sha256-vihL4glDsBUUxJy+ODL+jMIVUTwOWWKx00kQLPFvLCU=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/hire/>Hire me?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (🇳🇴)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/the-discipline-of-constraints-elm-usereducer-lessons/>The Discipline of Constraints: What Elm Taught Me About React's useReducer</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-09-18T00:00:00Z>September 18, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
8-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/react/>React</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/usereducer/>Usereducer</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/architecture/>Architecture</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/functional-programming/>Functional Programming</a></span></div></div></header><div class=post-content><h2 id=the-accidental-teacher>The Accidental Teacher
<a class=heading-link href=#the-accidental-teacher><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>I&rsquo;ve been thinking about discipline lately. Not the &ldquo;wake up at 5 AM and eat nothing but kale&rdquo; kind, but the more interesting variety: the kind that comes from working within constraints that make bad choices impossible.</p><p>After spending several months deep in Elm land - where the compiler is your strict but helpful mentor - I returned to a React codebase that was enthusiastically using <code>useReducer</code> everywhere. The whiplash was immediate and instructive.</p><p>You see, both approaches solve the same fundamental problem: managing complex state changes in a predictable way. But experiencing Elm&rsquo;s enforced discipline first made me realize just how much rope React gives you to hang yourself with - and, more importantly, how to avoid doing exactly that.</p><p>This isn&rsquo;t another &ldquo;Elm vs React&rdquo; post. This is about what happens when you take the lessons from a language that won&rsquo;t let you make mistakes and apply them to one that absolutely will.</p><h2 id=same-shape-different-guardrails>Same Shape, Different Guardrails
<a class=heading-link href=#same-shape-different-guardrails><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The patterns look almost identical at first glance:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#78787e>-- Elm: The compiler ensures you handle every case</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>type</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>LoadUser</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>UserLoaded</span> (<span style=color:#9aedfe>Result</span> <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Error</span> <span style=color:#9aedfe>User</span>)
</span></span><span style=display:flex><span>    <span style=color:#57c7ff>|</span> <span style=color:#9aedfe>UpdateName</span> <span style=color:#9aedfe>String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>LoadUser</span> <span style=color:#ff5c57>id</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>loading</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>True</span> }
</span></span><span style=display:flex><span>            , <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>get</span> { <span style=color:#ff5c57>url</span> <span style=color:#57c7ff>=</span> <span style=color:#5af78e>&#34;/users/&#34;</span> <span style=color:#57c7ff>++</span> <span style=color:#ff5c57>id</span>, <span style=color:#ff5c57>expect</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>expectJson</span> <span style=color:#9aedfe>UserLoaded</span> <span style=color:#ff5c57>userDecoder</span> }
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>UserLoaded</span> (<span style=color:#9aedfe>Ok</span> <span style=color:#ff5c57>user</span>) <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>user</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Just</span> <span style=color:#ff5c57>user</span>, <span style=color:#ff5c57>loading</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>False</span> }, <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>UserLoaded</span> (<span style=color:#9aedfe>Err</span> <span style=color:#ff5c57>error</span>) <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>error</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Just</span> <span style=color:#ff5c57>error</span>, <span style=color:#ff5c57>loading</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>False</span> }, <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>UpdateName</span> <span style=color:#ff5c57>name</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>user</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Maybe</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>map</span> (<span style=color:#57c7ff>\</span><span style=color:#ff5c57>u</span> <span style=color:#57c7ff>-&gt;</span> { <span style=color:#ff5c57>u</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>name</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>name</span> }) <span style=color:#ff5c57>model</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>user</span> }, <span style=color:#9aedfe>Cmd</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>none</span> )
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#78787e>// React: You can handle every case... or not
</span></span></span><span style=display:flex><span><span style=color:#78787e></span><span style=color:#ff6ac1>type</span> Action <span style=color:#ff6ac1>=</span>
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;LOAD_USER&#34;</span>; id: <span style=color:#9aedfe>string</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_LOADED&#34;</span>; user: <span style=color:#9aedfe>User</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_FAILED&#34;</span>; error: <span style=color:#9aedfe>string</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;UPDATE_NAME&#34;</span>; name: <span style=color:#9aedfe>string</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>const</span> reducer <span style=color:#ff6ac1>=</span> (state: <span style=color:#9aedfe>State</span>, action: <span style=color:#9aedfe>Action</span>)<span style=color:#ff6ac1>:</span> State <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>switch</span> (action.<span style=color:#ff6ac1>type</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;LOAD_USER&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, loading: <span style=color:#9aedfe>true</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;USER_LOADED&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, user: <span style=color:#9aedfe>action.user</span>, loading: <span style=color:#9aedfe>false</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;USER_FAILED&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, error: <span style=color:#9aedfe>action.error</span>, loading: <span style=color:#9aedfe>false</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;UPDATE_NAME&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> {
</span></span><span style=display:flex><span>        ...state,
</span></span><span style=display:flex><span>        user: <span style=color:#9aedfe>state.user</span> <span style=color:#ff6ac1>?</span> { ...state.user, name: <span style=color:#9aedfe>action.name</span> } <span style=color:#ff6ac1>:</span> state.user,
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>default</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> state; <span style=color:#78787e>// feel free to forget a case, nobody will tell you (or even know)
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Both follow the same mental model: messages/actions flow in, new state flows out, effects happen on the side. But there&rsquo;s a crucial difference hiding in that innocent-looking <code>default</code> case.</p><h2 id=the-tyranny-of-choice>The Tyranny of Choice
<a class=heading-link href=#the-tyranny-of-choice><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>In Elm, if you add a new message variant and forget to handle it, your code simply won&rsquo;t compile. The type checker becomes your pair programming partner, gently (but firmly) reminding you about edge cases you&rsquo;ve forgotten.</p><p>In React with TypeScript, you get some of this safety - the discriminated union helps, and if you&rsquo;re disciplined about your typing, you&rsquo;ll catch missing cases. But the <code>default</code> case is an escape hatch that&rsquo;s always available. And escape hatches have a way of being used.</p><p>Here&rsquo;s what I learned from going Elm → React: <strong>the <code>default</code> case is where discipline goes to die.</strong></p><p>I lost count of how many React reducers I found that looked like this:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#ff6ac1>const</span> reducer <span style=color:#ff6ac1>=</span> (state: <span style=color:#9aedfe>State</span>, action: <span style=color:#9aedfe>any</span>) <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>switch</span> (action.<span style=color:#ff6ac1>type</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;LOAD_USER&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, loading: <span style=color:#9aedfe>true</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#5af78e>&#34;USER_LOADED&#34;</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> { ...state, user: <span style=color:#9aedfe>action.payload</span>, loading: <span style=color:#9aedfe>false</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#78787e>// ... a few more cases ...
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>default</span><span style=color:#ff6ac1>:</span>
</span></span><span style=display:flex><span>      <span style=color:#ff6ac1>return</span> state; <span style=color:#78787e>// &#34;Eh, we&#39;ll handle the rest later&#34;
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>That <code>any</code> type crept in because someone needed to add a quick action and didn&rsquo;t want to deal with TypeScript complaints. The <code>default</code> case silently swallows unhandled actions. You&rsquo;ve gone from a system that forces you to think through every state transition to one that lets you sweep complexity under the rug.</p><p>Elm wouldn&rsquo;t have let this slide for a second.</p><h2 id=effects-the-other-half-of-the-equation>Effects: The Other Half of the Equation
<a class=heading-link href=#effects-the-other-half-of-the-equation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>But the real education came when dealing with side effects. In Elm, effects are data:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#78787e>-- Elm: Effects are just data describing what should happen</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Msg</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> ( <span style=color:#9aedfe>Model</span>, <span style=color:#9aedfe>Cmd</span> <span style=color:#9aedfe>Msg</span> )
</span></span><span style=display:flex><span><span style=color:#ff5c57>update</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>msg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>        <span style=color:#9aedfe>LoadUser</span> <span style=color:#ff5c57>id</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>            ( { <span style=color:#ff5c57>model</span> <span style=color:#57c7ff>|</span> <span style=color:#ff5c57>loading</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>True</span> }
</span></span><span style=display:flex><span>            , <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>get</span> {
</span></span><span style=display:flex><span>                <span style=color:#ff5c57>url</span> <span style=color:#57c7ff>=</span> <span style=color:#5af78e>&#34;/users/&#34;</span> <span style=color:#57c7ff>++</span> <span style=color:#ff5c57>id</span>
</span></span><span style=display:flex><span>                , <span style=color:#ff5c57>expect</span> <span style=color:#57c7ff>=</span> <span style=color:#9aedfe>Http</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>expectJson</span> <span style=color:#9aedfe>UserLoaded</span> <span style=color:#ff5c57>userDecoder</span>
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            )
</span></span></code></pre></div><p>The <code>Cmd</code> value is a description of an effect to perform. The Elm runtime handles executing it, manages cancellation, and ensures results come back through your update function. You never escape the loop.</p><p>In React, effects are&mldr; well, effects:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#ff6ac1>const</span> UserProfile <span style=color:#ff6ac1>=</span> ({ userId }<span style=color:#ff6ac1>:</span> { userId: <span style=color:#9aedfe>string</span> }) <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>const</span> [state, dispatch] <span style=color:#ff6ac1>=</span> useReducer(reducer, initialState);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  useEffect(() <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>    dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;LOAD_USER&#34;</span>, id: <span style=color:#9aedfe>userId</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>const</span> controller <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>new</span> AbortController();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fetch(<span style=color:#5af78e>`/users/</span><span style=color:#5af78e>${</span>userId<span style=color:#5af78e>}</span><span style=color:#5af78e>`</span>, { signal: <span style=color:#9aedfe>controller.signal</span> })
</span></span><span style=display:flex><span>      .then((response) <span style=color:#ff6ac1>=&gt;</span> response.json())
</span></span><span style=display:flex><span>      .then((user) <span style=color:#ff6ac1>=&gt;</span> dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_LOADED&#34;</span>, user }))
</span></span><span style=display:flex><span>      .<span style=color:#ff6ac1>catch</span>((error) <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> (error.name <span style=color:#ff6ac1>!==</span> <span style=color:#5af78e>&#34;AbortError&#34;</span>) {
</span></span><span style=display:flex><span>          dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_FAILED&#34;</span>, error: <span style=color:#9aedfe>error.message</span> });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> () <span style=color:#ff6ac1>=&gt;</span> controller.abort();
</span></span><span style=display:flex><span>  }, [userId]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#78787e>// ... rest of component
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>};
</span></span></code></pre></div><p>You&rsquo;re back in the imperative world of manual cleanup, race condition management, and &ldquo;did I remember to handle the error case?&rdquo; The reducer gives you a nice pure core, but effects still happen in the messy, error-prone world of <code>useEffect</code>.</p><h2 id=the-lesson-constraints-enable-creativity>The Lesson: Constraints Enable Creativity
<a class=heading-link href=#the-lesson-constraints-enable-creativity><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>What Elm taught me wasn&rsquo;t that React&rsquo;s approach is wrong - it&rsquo;s that discipline is a muscle that needs exercise. When the language forces you to be disciplined, you develop better habits. When it doesn&rsquo;t, you need to bring that discipline yourself.</p><p>After using Elm <em>every day</em> at my client&rsquo;s, I found myself writing React code differently:</p><ol><li><p><strong>Never use <code>any</code> in action types.</strong> If TypeScript is complaining about your action shape, fix the types, don&rsquo;t silence the compiler.</p></li><li><p><strong>Never add a default case that just returns state.</strong> If you&rsquo;re not handling an action, be explicit about it - throw an error or add a comment explaining why it&rsquo;s ignored.</p></li><li><p><strong>Encapsulate effects in custom hooks.</strong> Create hooks that dispatch actions rather than performing effects directly in components.</p></li></ol><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#78787e>// Instead of mixing effects directly in components
</span></span></span><span style=display:flex><span><span style=color:#78787e></span><span style=color:#ff6ac1>const</span> useFetchUser <span style=color:#ff6ac1>=</span> (userId: <span style=color:#9aedfe>string</span>, dispatch: <span style=color:#9aedfe>Dispatch</span>&lt;<span style=color:#ff6ac1>Action</span>&gt;) <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>  useEffect(() <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>if</span> (<span style=color:#ff6ac1>!</span>userId) <span style=color:#ff6ac1>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;LOAD_USER&#34;</span>, id: <span style=color:#9aedfe>userId</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>const</span> controller <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>new</span> AbortController();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fetchUser(userId, controller.signal)
</span></span><span style=display:flex><span>      .then((user) <span style=color:#ff6ac1>=&gt;</span> dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_LOADED&#34;</span>, user }))
</span></span><span style=display:flex><span>      .<span style=color:#ff6ac1>catch</span>((error) <span style=color:#ff6ac1>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> (error.name <span style=color:#ff6ac1>!==</span> <span style=color:#5af78e>&#34;AbortError&#34;</span>) {
</span></span><span style=display:flex><span>          dispatch({ <span style=color:#ff6ac1>type</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;USER_FAILED&#34;</span>, error: <span style=color:#9aedfe>error.message</span> });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> () <span style=color:#ff6ac1>=&gt;</span> controller.abort();
</span></span><span style=display:flex><span>  }, [userId, dispatch]);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><ol start=4><li><strong>Design invalid states out of existence.</strong> Instead of separate booleans for <code>loading</code>, <code>error</code>, and <code>data</code>, use discriminated unions:</li></ol><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#ff6ac1>type</span> UserState <span style=color:#ff6ac1>=</span>
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { status<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;idle&#34;</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { status<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;loading&#34;</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { status<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;success&#34;</span>; user: <span style=color:#9aedfe>User</span> }
</span></span><span style=display:flex><span>  <span style=color:#ff6ac1>|</span> { status<span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;error&#34;</span>; error: <span style=color:#9aedfe>string</span> };
</span></span></code></pre></div><p>This prevents impossible states like <code>loading: true, error: "Something went wrong"</code> that can cause confusing UI states.</p><p>(More on that in <a href=/posts/making-impossible-states-impossible-with-functional-dependency-injection/>Making Impossible States Impossible with Functional Dependency Injection</a>.)</p><h2 id=the-deeper-pattern>The Deeper Pattern
<a class=heading-link href=#the-deeper-pattern><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The real insight isn&rsquo;t about Elm vs React - it&rsquo;s about constraint-driven design. Working in a language that makes certain mistakes impossible teaches you to recognize and avoid those same mistakes when they become possible again.</p><p>Elm&rsquo;s constraints taught me better patterns for <code>useReducer</code>. The compiler&rsquo;s insistence on totality made me more careful about edge cases. The enforced purity of the update function made me think harder about where effects belong.</p><h2 id=bringing-elms-discipline-to-react>Bringing Elm&rsquo;s Discipline to React
<a class=heading-link href=#bringing-elms-discipline-to-react><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>If you&rsquo;ve never tried Elm but work with <code>useReducer</code> (or Redux) regularly, here are some constraints I learned to impose on myself:</p><ul><li><strong>Exhaustive action handling</strong>: Comment explicitly when you&rsquo;re intentionally ignoring an action.</li><li><strong>Total state transitions</strong>: Think through what should happen to every piece of state for every action.</li><li><strong>Effect isolation</strong>: Keep effects in custom hooks that communicate through dispatch.</li><li><strong>Invalid state elimination</strong>: Use TypeScript&rsquo;s discriminated unions to make impossible states unrepresentable.</li></ul><p>You don&rsquo;t need Elm&rsquo;s compiler to enforce these patterns, but experiencing enforced discipline helps you recognize when you&rsquo;re being undisciplined.</p><p>(Actually, IMHO you <em>do</em> need Elm&rsquo;s compiler; I&rsquo;m trying not to sound Elm biased but who am I kidding 😆)</p><h2 id=the-craft-connection>The Craft Connection
<a class=heading-link href=#the-craft-connection><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>This connects back to something I&rsquo;ve been thinking about regarding <a href=/posts/coding-as-craft-going-back-to-the-old-gym/>coding as craft</a>. Master craftsmen often impose constraints on themselves - not because they have to, but because constraints force innovation and build skill.</p><p>The discipline I learned from Elm&rsquo;s compiler made me a better React developer. And I&rsquo;m more mindful with Kotlin and Golang as well, even though most of that stuff isn&rsquo;t functional at all. The constraints didn&rsquo;t limit my creativity; they channeled it in more productive directions.</p><p>When you&rsquo;re building state management with <code>useReducer</code>, you&rsquo;re not just solving the immediate problem - you&rsquo;re practicing a way of thinking about state, time, and change. The habits you build in one context carry over to others.</p><p>The real question isn&rsquo;t &ldquo;Which approach is better?&rdquo; It&rsquo;s &ldquo;What can I learn from this constraint that will make me better when the constraint is removed?&rdquo;</p><p>Sometimes the best teacher is a language that simply won&rsquo;t let you make certain mistakes. Even if you never ship Elm to production, the lessons in discipline are worth the price of admission.</p><p>So even if you have no realistic prospect of using Elm (or Haskell, OCaml or any other ambitious functional language) professionally – learning might make you a better developer nonetheless.</p></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=🍺 data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>