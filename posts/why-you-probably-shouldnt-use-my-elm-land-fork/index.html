<!doctype html><html lang=en><head><title>Why You Probably Shouldn't Use My Elm Land Fork Â· cekrem.github.io</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Ekrem"><meta name=description content="A pragmatic detour while waiting for the real solution - introducing @cekrem/elm-land and why it exists as a temporary workaround"><meta name=keywords content="developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cekrem.github.io/images/featured-with-margins.png"><meta name=twitter:title content="Why You Probably Shouldn't Use My Elm Land Fork"><meta name=twitter:description content="A pragmatic detour while waiting for the real solution - introducing @cekrem/elm-land and why it exists as a temporary workaround"><meta property="og:url" content="https://cekrem.github.io/posts/why-you-probably-shouldnt-use-my-elm-land-fork/"><meta property="og:site_name" content="cekrem.github.io"><meta property="og:title" content="Why You Probably Shouldn't Use My Elm Land Fork"><meta property="og:description" content="A pragmatic detour while waiting for the real solution - introducing @cekrem/elm-land and why it exists as a temporary workaround"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-17T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-17T00:00:00+00:00"><meta property="article:tag" content="Elm"><meta property="article:tag" content="Elm-Land"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Open-Source"><meta property="og:image" content="https://cekrem.github.io/images/featured-with-margins.png"><link rel=canonical href=https://cekrem.github.io/posts/why-you-probably-shouldnt-use-my-elm-land-fork/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.f63b17f16aa5dbf557dd08e6806b0b477d5e6d8f2af64807e14512a12dd2ccaa.css integrity="sha256-9jsX8Wql2/VX3QjmgGsLR31ebY8q9kgH4UUSoS3SzKo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.be284be20943b01514c49cbe3832fe8cc215513c0e5962b1d349102cf16f2c25.css integrity="sha256-vihL4glDsBUUxJy+ODL+jMIVUTwOWWKx00kQLPFvLCU=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cekrem.github.io/>cekrem.github.io
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/hire/>Hire me?</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/books-i-think-software-engineers-should-read>Recommended Books</a></li><li class=navigation-item><a class=navigation-link href=https://creators.spotify.com/pod/show/disippel>Podcast (ðŸ‡³ðŸ‡´)</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://cekrem.github.io/posts/why-you-probably-shouldnt-use-my-elm-land-fork/>Why You Probably Shouldn't Use My Elm Land Fork</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-10-17T00:00:00Z>October 17, 2025
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
8-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/elm/>Elm</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/elm-land/>Elm-Land</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/architecture/>Architecture</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/open-source/>Open-Source</a></span></div></div></header><div class=post-content><h2 id=a-pragmatic-fork>A Pragmatic Fork
<a class=heading-link href=#a-pragmatic-fork><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>In <a href=/posts/elm-land-shared-subscriptions-and-the-art-of-workarounds/>my previous post</a>, I explored the challenge of reacting to <code>Shared</code> model changes in Elm Land. I tried a <a href=https://package.elm-lang.org/packages/cekrem/html-helpers/latest/HtmlHelpers#sendMsgWhen class=external-link target=_blank rel=noopener>pretty hacky HTML helper</a> that sends messages from the view layer. It worked, but it felt&mldr; wrong. (And to be honest, the previous &ldquo;solution&rdquo; wasn&rsquo;t as much a real solution as it was a satirical take on how far one is willing to go to push through framework limitations.)</p><p>After considering less satirical alternatives, I settled on the most straightforward approach: to fork Elm Land, add the specific hook we needed, and use it as a vendored dependency. This would tide us over until either Elm Land 1.0 arrives with proper built-in support, or (better yet) until we can refactor our app to not need this at all.</p><p>So I did. And you can find it on npm as <a href=https://www.npmjs.com/package/@cekrem/elm-land class=external-link target=_blank rel=noopener><code>@cekrem/elm-land</code></a>.</p><p><strong>But before you go installing it, let me be very clear: you probably shouldn&rsquo;t use it.</strong></p><p>Let me explain.</p><h2 id=what-the-fork-does>What the Fork Does
<a class=heading-link href=#what-the-fork-does><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The fork adds a single new feature to Elm Land&rsquo;s beta: a <code>withOnSharedMsg</code> hook that lets pages and layouts react to messages from <code>Shared</code>.</p><p>Here&rsquo;s how it works (for pages; the type signature for <code>Layout.withOnSharedMsg</code> is identical):</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elm data-lang=elm><span style=display:flex><span><span style=color:#ff5c57>page</span> <span style=color:#57c7ff>:</span> <span style=color:#9aedfe>Shared</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Model</span> <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Route</span> () <span style=color:#57c7ff>-&gt;</span> <span style=color:#9aedfe>Page</span> <span style=color:#9aedfe>Model</span> <span style=color:#9aedfe>Msg</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>page</span> <span style=color:#ff5c57>shared</span> <span style=color:#ff5c57>route</span> <span style=color:#57c7ff>=</span>
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>Page</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>new</span>
</span></span><span style=display:flex><span>        { <span style=color:#ff5c57>init</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>init</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>update</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>update</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>view</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>view</span>
</span></span><span style=display:flex><span>        , <span style=color:#ff5c57>subscriptions</span> <span style=color:#57c7ff>=</span> <span style=color:#ff5c57>subscriptions</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#57c7ff>|&gt;</span> <span style=color:#9aedfe>Page</span><span style=color:#57c7ff>.</span><span style=color:#ff5c57>withOnSharedMsg</span>
</span></span><span style=display:flex><span>            (<span style=color:#57c7ff>\</span><span style=color:#ff5c57>sharedMsg</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ff6ac1>case</span> <span style=color:#ff5c57>sharedMsg</span> <span style=color:#ff6ac1>of</span>
</span></span><span style=display:flex><span>                    <span style=color:#9aedfe>Shared</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>Msg</span><span style=color:#57c7ff>.</span><span style=color:#9aedfe>ItemsSaved</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                        <span style=color:#9aedfe>ShowSuccessToast</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#ff5c57>_</span> <span style=color:#57c7ff>-&gt;</span>
</span></span><span style=display:flex><span>                        <span style=color:#9aedfe>NoOp</span>
</span></span><span style=display:flex><span>            )
</span></span></code></pre></div><p>When <code>Shared</code> processes certain messages, your page can react by returning its own message. In this example, when <code>Shared.Msg.ItemsSaved</code> happens, the page receives a <code>ShowSuccessToast</code> message that it can handle in its <code>update</code> function.</p><p>It&rsquo;s explicit, type-safe, and doesn&rsquo;t require hacky HTML tricks or JavaScript ports.</p><h2 id=how-its-implemented>How It&rsquo;s Implemented
<a class=heading-link href=#how-its-implemented><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The implementation is surprisingly straightforward - the TL;DR is that in addition to sending <code>Shared.Msg</code> through <code>update</code> in <code>Shared</code> (returning a new <code>Shared.Model</code>), it also passes messages through the <code>withOnSharedMsg</code> of every page and layout that uses this helper. These &ldquo;secondary&rdquo; update handlers in turn transform the <code>Shared.Msg</code> into <code>Page/Layout Msg</code> (of course leaving the shared <em>model</em> intact).</p><p>You can see the <a href=https://github.com/elm-land/elm-land/pull/205 class=external-link target=_blank rel=noopener>full implementation in the pull request</a> I submitted to Elm Land. It&rsquo;s about 100 lines of code, most of which is plumbing to thread the new hook through Elm Land&rsquo;s code generation.</p><h2 id=why-i-made-this>Why I Made This
<a class=heading-link href=#why-i-made-this><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>We hit a real need at my client project. We had moved a lot of state out of individual pages and into <code>Shared</code> to avoid refetching the same data across different parts of the app. Our views already reacted to the changed state just fine, but we needed to react to <em>the moment of change</em> - to trigger effects when something in <code>Shared</code> changed, like showing a notification when one component deletes an item that another component is displaying. Without a way to react to those point-in-time events, we had a few unpalatable options:</p><ol><li>Use the <code>sendMsgWhen</code> hack from my previous post (never a real option, like I said the whole solution was mainly parodic)</li><li>Route all changes through JavaScript ports (ah&mldr; The idea that woke my satirical mind in the first place â€“ it still gives me the shivers!)</li><li>Manually diff <code>Shared.Model</code> on every update</li><li>Let go of the shared state mental model completely, accepting duplicated state across components</li><li>Fork Elm Land and add the hook we need</li></ol><p>Option 5 became the clear winner. Ryan (Elm Land&rsquo;s author) explicitly encouraged forking for cases like this - better to unblock your team with a vendored copy than to be bottlenecked by the framework&rsquo;s release schedule.</p><p>And that&rsquo;s what this fork is: <strong>a pragmatic workaround for a temporary limitation.</strong></p><h2 id=why-you-probably-shouldnt-use-this>Why You Probably Shouldn&rsquo;t Use This
<a class=heading-link href=#why-you-probably-shouldnt-use-this><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Here are several good reasons not to use <code>@cekrem/elm-land</code>:</p><h3 id=1-you-might-not-need-it>1. You Might Not Need It
<a class=heading-link href=#1-you-might-not-need-it><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>As I discussed in my previous post, needing to react to <code>Shared</code> changes with effects is actually pretty rare. Most of the time, you can:</p><ul><li>Model your state differently to avoid the issue</li><li>Let your view react to <code>Shared</code> naturally (which works great)</li><li>Initialize your page state appropriately</li></ul><p>If you&rsquo;re reaching for this hook, first ask: &ldquo;Am I modeling this correctly?&rdquo; The answer might be no, and fixing your model might be cleaner than adding a &ldquo;framework hook&rdquo;.</p><h3 id=2-its-a-maintenance-burden>2. It&rsquo;s a Maintenance Burden
<a class=heading-link href=#2-its-a-maintenance-burden><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>This fork needs to stay in sync with Elm Land&rsquo;s beta. Every time there&rsquo;s an upstream change, someone needs to merge it. That someone is probably you if you use this.</p><p>For my team, that trade-off is worth it. We have a specific need, a certain timeline, and the expertise to maintain the fork. But if you&rsquo;re just starting with Elm Land, taking on a forked dependency is probably not where you want to begin.</p><h3 id=3-its-not-the-real-solution>3. It&rsquo;s Not the Real Solution
<a class=heading-link href=#3-its-not-the-real-solution><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Elm Land 1.0 will have a better, more comprehensive approach to this problem. This fork is explicitly a stopgap measure. When 1.0 arrives, we&rsquo;ll migrate off this fork and onto the official release.</p><p>Using this fork means you&rsquo;ll need to migrate later. If you can wait for the real solution, you should.</p><h3 id=4-it-might-enable-bad-patterns>4. It Might Enable Bad Patterns
<a class=heading-link href=#4-it-might-enable-bad-patterns><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Having <code>withOnSharedMsg</code> available makes it easy to add &ldquo;just one quick reaction&rdquo; to a shared message. Then another. And another.</p><p>Before you know it, you have a complex web of dependencies between <code>Shared</code> and your pages - exactly the kind of coupling that better state modeling would avoid.</p><p>The friction of not having this hook is actually useful sometimes. It forces you to think harder about your architecture.</p><h2 id=when-you-might-use-this>When You <em>Might</em> Use This
<a class=heading-link href=#when-you-might-use-this><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>That said, there are valid scenarios where this fork could help:</p><ol><li><strong>You have a production deadline</strong> and can&rsquo;t wait for Elm Land 1.0</li><li><strong>You&rsquo;ve carefully considered your architecture</strong> and determined you really do need this</li><li><strong>You have the expertise</strong> to maintain a forked dependency</li><li><strong>You have a specific, well-defined use case</strong> (not just &ldquo;it would be convenient&rdquo;)</li></ol><p>If all four of those are true, then sure - <code>@cekrem/elm-land</code> might save you some time.</p><h2 id=most-importantly-though>Most importantly, though
<a class=heading-link href=#most-importantly-though><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>I want to be absolutely clear: <strong>Elm Land is a fantastic framework.</strong></p><p>Ryan has built something genuinely useful that makes Elm development more productive and enjoyable. The beta is already impressive, and everything he&rsquo;s shared about 1.0 sounds even better.</p><p>This fork exists not because Elm Land is broken, but because:</p><ol><li>The beta has known limitations (which Ryan openly acknowledges)</li><li>1.0 is still in development</li><li>Real projects sometimes need solutions now</li></ol><p>This fork is a bridge, not a rejection. It&rsquo;s a way to use Elm Land productively today while waiting for the better solution tomorrow.</p><h2 id=installation-if-you-really-want-to>Installation (If You Really Want To)
<a class=heading-link href=#installation-if-you-really-want-to><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>If you&rsquo;ve read all the caveats and still want to try it:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#78787e># Global install</span>
</span></span><span style=display:flex><span>npm install -g @cekrem/elm-land
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e># Project install</span>
</span></span><span style=display:flex><span>npm install --save-dev @cekrem/elm-land
</span></span></code></pre></div><p>Then use <code>elm-land</code> commands as normal - the CLI is identical, just with the new <code>withOnSharedMsg</code> hook available.</p><p>Check out the <a href=https://www.npmjs.com/package/@cekrem/elm-land class=external-link target=_blank rel=noopener>package on npm</a> for the current version and any additional notes.</p><h2 id=the-bigger-lesson>The Bigger Lesson
<a class=heading-link href=#the-bigger-lesson><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>This whole experience reinforces something I&rsquo;ve learned about open source: <strong>Good maintainers support pragmatic forks.</strong></p><p>Ryan didn&rsquo;t take offense at the fork. He didn&rsquo;t try to convince me the limitation wasn&rsquo;t real. He encouraged it as a valid solution while being transparent about what&rsquo;s coming in 1.0.</p><p>That&rsquo;s how healthy open source projects work. The framework serves the users, not the other way around.</p><p>And sometimes serving users means giving them permission to fork when they need something you can&rsquo;t provide yet.</p><h2 id=looking-forward>Looking Forward
<a class=heading-link href=#looking-forward><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>When Elm Land 1.0 arrives with its <code>Effect</code> and <code>Subscription</code> system, we&rsquo;ll migrate off this fork immediately. That system will be more powerful, more flexible, and better integrated with the framework&rsquo;s overall design.</p><p>Until then, <code>@cekrem/elm-land</code> solves a specific problem for my team. If it helps yours too, great. But don&rsquo;t reach for it without first questioning whether you really need it.</p><p>Nine times out of ten, better modeling is the answer. This fork is for the tenth time.</p><h2 id=the-real-takeaway>The Real Takeaway
<a class=heading-link href=#the-real-takeaway><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>If there&rsquo;s one thing I want you to get from this post, it&rsquo;s not &ldquo;use my fork&rdquo; or even &ldquo;fork Elm Land when you need to.&rdquo;</p><p>It&rsquo;s this: <strong>Framework constraints are usually there for good reasons, but pragmatism has its place too.</strong></p><p>Think hard about your architecture. Model your state carefully. Exhaust the clean solutions first. But if you hit a legitimate limitation that&rsquo;s blocking your team, and you have the expertise to work around it responsibly - don&rsquo;t be afraid to do so.</p><p>Just be honest with yourself about whether it&rsquo;s a legitimate limitation or a sign you&rsquo;re modeling things wrong.</p><p>(It&rsquo;s probably the latter. But sometimes it&rsquo;s not!)</p><p>And for the record, again: I really do like Elm Land.</p></div><footer></footer></article></section></div><style>form{display:flex;justify-content:center}</style><form action="https://api.follow.it/subscription-form/SDRVMUk2VmsySENBNk94RDNKNDFnS3NmWlQ5a3gxejNIeUlJWHl3QjdqNnRHdENkaXp5aXZhZlFvcGtzcEZ3K0o5TFVRdSt2WWM5RWRsWmZwWVhNUS9PZjJqMWZ3aHBwZUhjT1ZpWXBGRkdZOWtIcGhYQkJkSkE4QTQ1eHl5YkF8RTZHTExQOWFrN1pFY1F0RzZ5c3pVN2I1QTI1YXNtMjZiYllLU25zQkJ3bz0=/8" method=post><input type=email name=email required placeholder=Email spellcheck=false style="padding:1rem;border:none;border-radius:1rem 0 0 1rem;outline:none">
<button type=submit style="border:none;border-radius:0 1rem 1rem 0;outline:none;background:rgba(127,127,127,5%);cursor:pointer">
Subscribe</button></form><div id=elm-widget></div><script src=/widget.js></script><script>Elm.Main.init({node:document.getElementById("elm-widget"),flags:window.location.pathname})</script><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=6834b86198608700128c9ffa&product=sticky-share-buttons" async></script><footer class=footer><section class=container>Â© 2021 - 2025 Christian Ekrem
<script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-emoji=ðŸº data-id=cekrem data-description="Support me on Buy me a coffee!" data-message data-color=#ddd data-position=Left data-x_margin=18 data-y_margin=18></script></section><script src=https://formspree.io/js/formbutton-v1.min.js defer></script></footer><script src=https://sdk.feedback.one/v0/core.min.js data-project-id=019589e0-c6fb-7b80-b6ae-dffbfbb11f72 defer></script></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://cekrem.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>